function e(e,t){var n=localStorage.getItem("an-awesome-localstorage-db"),i=n?JSON.parse(n):{};return i[e]=t,localStorage.setItem("an-awesome-localstorage-db",JSON.stringify(i)),t}function t(e){return(localStorage.getItem("an-awesome-localstorage-db")?JSON.parse(localStorage.getItem("an-awesome-localstorage-db")):{})[e]}var n={set:e,get:t,increment:function(n){var i=t(n)||0;return e(n,++i),i}},i=function(e,t){var n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)},o=function(e,t){document.addEventListener(e,function(e){t(e.detail)},!1)},a={WEBSITE_TYPES:{CONTENT:"CONTENT",MARKETING:"MARKETING"},FOCUSABLE_SELECTORS:"a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]",IS_MOBILE:window.matchMedia("only screen and (max-width: 780px)").matches,MODAL_ELEM_CLASS:".email-modal",MODAL_ELEM_FORM_CLASS:".email-modal__content",MODAL_ELEM_CLOSE_BUTTON_CLASS:".email-modal__close",BODY_CLASS_MODAL_OPEN:"email-modal-is-open",MODAL_IS_OPENABLE:!1,SITE_PAGE_VIEWS:0,HIGHEST_SCROLL_PERCENTAGE:0,ACTIVE_TIME_ON_SITE:0,ACTIVE_TIME_ON_PAGE:0,setActiveElement:function(e){this.activeElement=e},getActiveElement:function(){return this.activeElement},setModalAsOpenable:function(){this.MODAL_IS_OPENABLE=!0,i("MODAL_IS_OPENABLE",!0)},isModalOpenable:function(){return this.MODAL_IS_OPENABLE},getHighestScrollPercentage:function(){return this.HIGHEST_SCROLL_PERCENTAGE},getActiveTimeOnSite:function(){return this.ACTIVE_TIME_ON_SITE},getActiveTimeOnPage:function(){return this.ACTIVE_TIME_ON_PAGE},incrementSitePageViews:function(){var e=n.increment("pageViews");this.SITE_PAGE_VIEWS=e,i("pageData",{pageViews:e})},setHighestScrollPercentage:function(e){var t=n.get("highestScrollPercentage")||0,o=e>t?e:t;n.set("highestScrollPercentage",o),this.HIGHEST_SCROLL_PERCENTAGE=o,i("pageData",{highestScrollPercentage:o})},incrementActiveTimeOnSite:function(e){var t=n.increment("activeTimeOnSite");this.ACTIVE_TIME_ON_SITE=t,i("pageData",{activeTimeOnSite:t})},incrementActiveTimeOnPage:function(e){this.ACTIVE_TIME_ON_PAGE+=1,i("pageData",{activeTimeOnPage:this.ACTIVE_TIME_ON_PAGE})}};function r(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}var l=function(e,t,n,i){var o,a=!1,r=0;function l(){o&&clearTimeout(o)}function d(){var e=this,d=Date.now()-r,c=arguments;function s(){r=Date.now(),n.apply(e,c)}function m(){o=void 0}a||(i&&!o&&s(),l(),void 0===i&&d>1e3?s():!0!==t&&(o=setTimeout(i?m:s,void 0===i?1e3-d:1e3)))}return"boolean"!=typeof t&&(i=n,n=t,t=void 0),d.cancel=function(){l(),a=!0},d}(0,function(){var e,t;a.setHighestScrollPercentage((e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t=window.pageYOffset/(e-document.documentElement.clientHeight),Math.floor(100*t))),a.incrementActiveTimeOnSite(),a.incrementActiveTimeOnPage()});function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=!1;if("undefined"!=typeof window){var s={get passive(){c=!0}};window.addEventListener("testPassive",null,s),window.removeEventListener("testPassive",null,s)}var m="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),u=[],E=!1,v=-1,g=void 0,_=void 0,S=function(e){return u.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},T=function(e){var t=e||window.event;return!!S(t.target)||t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)};function f(){document.body.classList.remove(a.BODY_CLASS_MODAL_OPEN),a.modalElem.style.display="none",document.querySelectorAll(a.FOCUSABLE_SELECTORS).forEach(function(e){return e.removeAttribute("tabindex")}),document.querySelectorAll("body > [aria-hidden]").forEach(function(e){return e.removeAttribute("aria-hidden")}),a.modalElem.setAttribute("aria-hidden","true");var e=a.getActiveElement();e&&e.focus(),function(e){if(m){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,u=u.filter(function(t){return t.targetElement!==e}),E&&0===u.length&&(document.removeEventListener("touchmove",T,c?{passive:!1}:void 0),E=!1)}else(u=u.filter(function(t){return t.targetElement!==e})).length||setTimeout(function(){void 0!==_&&(document.body.style.paddingRight=_,_=void 0),void 0!==g&&(document.body.style.overflow=g,g=void 0)})}(a.modalElem)}var p=["pageViews","highestScrollPercentage","activeTimeOnSite","activeTimeOnPage"],A={pageViews:"",highestScrollPercentage:"%",activeTimeOnSite:"s",activeTimeOnPage:"s"};function b(e){var t,n=e.websiteType,i=e.beSlightlyMoreAggressive,s=void 0!==i&&i,b=e.onSubmit,O=void 0===b?function(){}:b,h=e.showDebugNotice,L=e.imageSrc,y=void 0===L?"":L,I=e.headingText,w=void 0===I?"Sign up for updates":I,M=e.descriptionText,C=void 0===M?"Get cutting edge articles and insights into our process":M,P=e.mainButtonText,N=void 0===P?"Sign up":P;void 0!==h&&h&&(o("pageData",function(e){var t=p.find(function(t){return e.hasOwnProperty(t)}),n=e[t]+A[t];document.querySelector(".debug-emails-forms [data-event-name='"+t+"']").innerText=n}),o("MODAL_IS_OPENABLE",function(e){document.querySelector(".debug-emails-forms [data-event-name='modalIsOpenable']").innerText=e?"true":"false"}),r(function(){document.body.insertAdjacentHTML("beforeend",'<div class="debug-emails-forms">\n  <div>\n    <b>Page views: </b><span data-event-name="pageViews">0</span>\n  </div>\n  <div>\n    <b>Scroll percentage: </b><span data-event-name="highestScrollPercentage">0%</span>\n  </div>\n  <div>\n    <b>Time on site: </b><span data-event-name="activeTimeOnSite">0s</span>\n  </div>\n  <div>\n    <b>Time on page: </b><span data-event-name="activeTimeOnPage">0s</span>\n  </div>\n  <div>\n    <b>Saw modal: </b><span>never</span>\n  </div>\n  <div>\n    <b>Closed modal: </b><span>never</span>\n  </div>\n  <div>\n    <b>Closed bottom bar: </b><span>never</span>\n  </div>\n  <div>\n    <b>Modal is openable: </b><span data-event-name="modalIsOpenable">false</span>\n  </div>\n  <button class="debug-emails-forms__reset" type="button">Reset</button>\n</div>'),document.querySelector(".debug-emails-forms__reset").addEventListener("click",function(e){window.localStorage.clear(),window.location.reload()})})),function(e){var t=e.onSubmit,n=function(e){return'\n<div class="email-modal" role="dialog" aria-labelledby="email-modal-title" aria-describedby="email-modal-description" aria-hidden="true" style="display: none">\n  <form class="email-modal__content" method="POST" action="/">\n    <div class="email-modal__top">\n      <div class="email-modal__top-media">\n        <img class="email-modal__top-image" src="'+e.imageSrc+'">\n      </div>\n      <div class="email-modal__top-content">\n        <h2 class="email-modal__title" id="email-modal-title">'+e.headingText+'</h2>\n        <p class="email-modal__description" id="email-modal-description">'+e.descriptionText+'</p>\n      </div>\n    </div>\n    <div class="email-modal__input-container">\n      <input class="email-modal__input email-signup-form-input" type="email" value="" placeholder="email@example.com">\n    </div>\n    <div class="email-modal__button-container">\n      <button class="email-modal__sign-up" type="submit">'+e.mainButtonText+'</button>\n    </div>\n    <button class="email-modal__close" type="button"></button>\n  </form>\n</div>\n'}({imageSrc:e.imageSrc,headingText:e.headingText,descriptionText:e.descriptionText,mainButtonText:e.mainButtonText});document.body.insertAdjacentHTML("beforeend",n),a.modalElem=document.querySelector(a.MODAL_ELEM_CLASS),a.modalElemForm=document.querySelector(a.MODAL_ELEM_FORM_CLASS),a.modalElemCloseButton=document.querySelector(a.MODAL_ELEM_CLOSE_BUTTON_CLASS),a.onSubmit=t,a.modalElem.addEventListener("click",function(e){({event:e}).event.target.closest(a.MODAL_ELEM_FORM_CLASS)||f()}),a.modalElemForm.addEventListener("submit",function(e){return function(e){var t=e.event;t.preventDefault();var n=t.currentTarget.querySelector(".email-signup-form-input");a.onSubmit({event:t,email:n.value}),f()}({event:e})}),a.modalElemCloseButton.addEventListener("click",function(){return f()}),document.addEventListener("keydown",function(e){27==={event:e}.event.keyCode&&document.body.classList.contains(a.BODY_CLASS_MODAL_OPEN)&&f()})}({onSubmit:O,imageSrc:y,headingText:w,descriptionText:C,mainButtonText:N}),a.incrementSitePageViews(),r(function(){window.addEventListener("scroll",l)}),function(e){var t=e.websiteType,n=e.beSlightlyMoreAggressive;o("pageData",function(e){var i=function(e){var t=e.websiteType,n=e.beSlightlyMoreAggressive;return t===a.WEBSITE_TYPES.CONTENT?n?{ACTIVE_TIME_ON_PAGE:6,ACTIVE_TIME_ON_SITE:20,HIGHEST_SCROLL_PERCENTAGE:25}:{ACTIVE_TIME_ON_PAGE:8,ACTIVE_TIME_ON_SITE:30,HIGHEST_SCROLL_PERCENTAGE:35}:t===a.WEBSITE_TYPES.MARKETING?n?{ACTIVE_TIME_ON_PAGE:6,SITE_PAGE_VIEWS:2,ACTIVE_TIME_ON_SITE:20}:{ACTIVE_TIME_ON_PAGE:8,SITE_PAGE_VIEWS:3,ACTIVE_TIME_ON_SITE:30}:void 0}({websiteType:t,beSlightlyMoreAggressive:n});Object.keys(i).every(function(e){return a[e]>=i[e]})&&a.setModalAsOpenable()})}({websiteType:n,beSlightlyMoreAggressive:s}),t=function(){a.isModalOpenable()&&function(){a.setActiveElement(document.activeElement),a.modalElem.style.display="flex",document.body.classList.add(a.BODY_CLASS_MODAL_OPEN),a.modalElem.querySelector(a.FOCUSABLE_SELECTORS).focus();var e=document.querySelectorAll(a.FOCUSABLE_SELECTORS),t=a.modalElem.querySelectorAll(a.FOCUSABLE_SELECTORS),n=Array.from(t);e.forEach(function(e){n.includes(e)||e.setAttribute("tabindex","-1")}),a.modalElem.removeAttribute("aria-hidden"),Array.from(document.body.children).forEach(function(e){e!==a.modalElem&&e.setAttribute("aria-hidden","true")}),function(e,t){if(m){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!u.some(function(t){return t.targetElement===e})){var n={targetElement:e,options:{}};u=[].concat(d(u),[n]),e.ontouchstart=function(e){1===e.targetTouches.length&&(v=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-v;!S(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?T(e):e.stopPropagation())}(t,e)},E||(document.addEventListener("touchmove",T,c?{passive:!1}:void 0),E=!0)}}else{setTimeout(function(){void 0===_&&(window,document),void 0===g&&(g=document.body.style.overflow,document.body.style.overflow="hidden")});var i={targetElement:e,options:{}};u=[].concat(d(u),[i])}}(a.modalElem)}()},document.addEventListener("mouseout",function(e){var n=e.clientY<20,i=null===e.relatedTarget,o="select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase();n&&i&&o&&t&&t()})}var O={contentWebsite:function(e){e.websiteType=a.WEBSITE_TYPES.CONTENT,b(e)},marketingWebsite:function(e){e.websiteType=a.WEBSITE_TYPES.MARKETING,b(e)}};export default O;
//# sourceMappingURL=polite-newsletter-forms.module.js.map
