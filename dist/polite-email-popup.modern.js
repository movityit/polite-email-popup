var e={};function t(e){document.body.insertAdjacentHTML("beforeend",e)}let n={};function a(e){return n[e]||document.querySelector(e)}var o,i,l=Object.prototype,r=Function.prototype.toString,s=l.hasOwnProperty,c=r.call(Object),d=l.toString,E=(o=Object.getPrototypeOf,i=Object,function(e){return o(i(e))});function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function _(){this.callbacksLookup={}}_.prototype={emit:function(e,t){for(var n,a=this.callbacksLookup["*"]||[],o=u(this.callbacksLookup[e]||[]);!(n=o()).done;)(0,n.value)({name:e,value:t});for(var i,l=u(a);!(i=l()).done;)(0,i.value)({name:e,value:t})},on:function(e,t){for(var n,a=u(Array.isArray(e)?e:[e]);!(n=a()).done;){var o=n.value;this.callbacksLookup[o]||(this.callbacksLookup[o]=[]),this.callbacksLookup[o].push(t)}}};var p=new _;function b(e,t){void 0===t&&(t={}),e=e||"tigerlily";var n=t.defaults,a=void 0===n?{}:n,o=JSON.parse(localStorage.getItem(e)||"{}",v);return o=Object.assign(a,o),new Proxy(o,function t(n){return{get:function(e,a){return T(e[a])?new Proxy(e[a],t(n)):e[a]},set:function(t,a,o){t[a]=o,localStorage.setItem(e,JSON.stringify(n,S));var i=t[a],l=T(i)?JSON.parse(JSON.stringify(i,S),v):i,m=T(o)?JSON.parse(JSON.stringify(o,S),v):o,u=function(e,t){if(e===t)return"";var n="";return function e(t,n,a){a=a||"",Array.isArray(t)?function(t,n,a){t.forEach((t,o,i)=>{const l=`${a}[${o}]`;n.call(i,t,o,i,l),e(i[o],n,l)})}(t,n,a):function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=d.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=E(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&r.call(n)==c}(t)&&function(t,n,a){for(const o in t){const i=a?`${a}.${o}`:o;n.call(t,t[o],o,t,i),e(t[o],n,i)}}(t,n,a)}(e,function(e,a,o,i){e===t&&(n=i)}),n}(n,o)||a;return p.emit(u,{prop:a,path:u,oldValue:l,value:m}),!0}}}(o))}function T(e){return"object"==typeof e&&null!==e&&!(e instanceof Date)}function S(e,t){if(this[e]instanceof Date){var n=this[e].getTime();return n?{__isDate:!0,ms:n}:void 0}return t}function v(e,t){return t.__isDate?new Date(t.ms):t}function O(e,t){let n=localStorage.getItem("an-awesome-localstorage-db"),a=n?JSON.parse(n):{};return a[e]=t,localStorage.setItem("an-awesome-localstorage-db",JSON.stringify(a)),t}function g(e){return(localStorage.getItem("an-awesome-localstorage-db")?JSON.parse(localStorage.getItem("an-awesome-localstorage-db")):{})[e]}b.on=function(e,t){p.on(e,function(e){t(e.value)})},b("polite-email-popup");var f={set:O,get:g,increment:function(e){let t=g(e)||0;return t++,O(e,t),t}},L=function(e,t){let n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)},A={WEBSITE_TYPES:{CONTENT:"CONTENT",MARKETING:"MARKETING"},FOCUSABLE_SELECTORS:"a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]",IS_MOBILE:window.matchMedia("only screen and (max-width: 780px)").matches,MODAL_ELEM_SELECTOR:".email-modal",MODAL_ELEM_FORM_SELECTOR:".email-modal__content",MODAL_ELEM_CLOSE_BUTTON_SELECTOR:".email-modal__close",BODY_CLASS_MODAL_OPEN:"email-modal-is-open",MODAL_IS_OPENABLE:!1,SITE_PAGE_VIEWS:0,HIGHEST_SCROLL_PERCENTAGE:0,ACTIVE_TIME_ON_SITE:0,ACTIVE_TIME_ON_PAGE:0,setActiveElement(e){this.activeElement=e},getActiveElement(){return this.activeElement},setModalAsOpenable(){this.MODAL_IS_OPENABLE=!0,L("MODAL_IS_OPENABLE",!0)},isModalOpenable(){return this.MODAL_IS_OPENABLE},getHighestScrollPercentage(){return this.HIGHEST_SCROLL_PERCENTAGE},getActiveTimeOnSite(){return this.ACTIVE_TIME_ON_SITE},getActiveTimeOnPage(){return this.ACTIVE_TIME_ON_PAGE},incrementSitePageViews(){let e=f.increment("pageViews");this.SITE_PAGE_VIEWS=e,L("pageData",{pageViews:e})},setHighestScrollPercentage(e){let t=f.get("highestScrollPercentage")||0,n=e>t?e:t;f.set("highestScrollPercentage",n),this.HIGHEST_SCROLL_PERCENTAGE=n,L("pageData",{highestScrollPercentage:n})},incrementActiveTimeOnSite(e){let t=f.increment("activeTimeOnSite");this.ACTIVE_TIME_ON_SITE=t,L("pageData",{activeTimeOnSite:t})},incrementActiveTimeOnPage(e){this.ACTIVE_TIME_ON_PAGE+=1,L("pageData",{activeTimeOnPage:this.ACTIVE_TIME_ON_PAGE})}};if("undefined"!=typeof window){var h={get passive(){}};window.addEventListener("testPassive",null,h),window.removeEventListener("testPassive",null,h)}function M(n){var o;o=()=>{!function(t){const n={showDebugNotice:!1,websiteType:"content",beSlightlyMoreAggressive:!1,onSubmit:()=>{console.log("Event: Email form submitted")},imageSrc:"",headingText:"Sign up for updates",descriptionText:"Get cutting edge articles and insights into our process",mainButtonText:"Sign up",closeButtonText:"Close",SELECTORS:{MODAL_ELEM_SELECTOR:".email-modal",MODAL_FORM_ELEM_SELECTOR:".email-modal__content",MODAL_CLOSE_BUTTON_ELEM_SELECTOR:".email-modal__close",DEBUG_ELEM_RESET_SELECTOR:".debug-emails-forms__reset"},WEBSITE_TYPES:{CONTENT:"CONTENT",MARKETING:"MARKETING"},IS_MOBILE:window.matchMedia("only screen and (max-width: 780px)").matches,FOCUSABLE_SELECTORS:"a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]",BODY_CLASS_MODAL_OPEN:"email-modal-is-open",DEBUG_UNIT_PAGE_VIEWS:"",DEBUG_UNIT_HIGHEST_SCROLL_PERCENTAGE:"%",DEBUG_UNIT_ACTIVE_TIME_ON_SITE:"s",DEBUG_UNIT_ACTIVE_TIME_ON_PAGE:"s"};Object.assign(e,n,t),window.temporaryGlobals=e}(n),e.showDebugNotice&&t('<div class="debug-emails-forms">\n    <div>\n      <b>Page views: </b><span data-event-name="pageViews">0</span>\n    </div>\n    <div>\n      <b>Scroll percentage: </b><span data-event-name="highestScrollPercentage">0%</span>\n    </div>\n    <div>\n      <b>Time on site: </b><span data-event-name="activeTimeOnSite">0s</span>\n    </div>\n    <div>\n      <b>Time on page: </b><span data-event-name="activeTimeOnPage">0s</span>\n    </div>\n    <div>\n      <b>Saw modal: </b><span>never</span>\n    </div>\n    <div>\n      <b>Closed modal: </b><span>never</span>\n    </div>\n    <div>\n      <b>Closed bottom bar: </b><span>never</span>\n    </div>\n    <div>\n      <b>Modal is openable: </b><span data-event-name="modalIsOpenable">false</span>\n    </div>\n    <button class="debug-emails-forms__reset" type="button">Reset</button>\n  </div>'),t(function({imageSrc:e,headingText:t,descriptionText:n,mainButtonText:a}){return`\n<div class="email-modal" role="dialog" aria-labelledby="email-modal-title" aria-describedby="email-modal-description" aria-hidden="true" style="display: none">\n  <form class="email-modal__content" method="POST" action="/">\n    <div class="email-modal__top">\n      <div class="email-modal__top-media">\n        <img class="email-modal__top-image" src="${e}">\n      </div>\n      <div class="email-modal__top-content">\n        <h2 class="email-modal__title" id="email-modal-title">${t}</h2>\n        <p class="email-modal__description" id="email-modal-description">${n}</p>\n      </div>\n    </div>\n    <div class="email-modal__input-container">\n      <input class="email-modal__input email-signup-form-input" type="email" value="" placeholder="email@example.com">\n    </div>\n    <div class="email-modal__button-container">\n      <button class="email-modal__sign-up" type="submit">${a}</button>\n    </div>\n    <button class="email-modal__close" type="button"></button>\n  </form>\n</div>\n`}(e)),t(function({headingText:e,mainButtonText:t,closeButtonText:n}){return`<div class="bottom-bar">\n  <form class="bottom-bar__content" method="POST" action="/">\n    <label class="bottom-bar__label">\n      <span class="bottom-bar__label-text">${e}</span>\n      <input class="bottom-bar__input email-signup-form-input" type="email" value="" placeholder="you@example.com">\n    </label>\n    <button class="bottom-bar__sign-up" type="submit">${t}</button>\n  </form>\n  <div class="bottom-bar__close-container">\n    <button class="bottom-bar__close" type="button">${n}</button>\n  </div>\n</div>`}(e)),function(){let{SELECTORS:t}=e;Object.assign(e,{MODAL_ELEM:a(t.MODAL_ELEM_SELECTOR),MODAL_FORM_ELEM:a(t.MODAL_FORM_ELEM_SELECTOR),MODAL_CLOSE_BUTTON_ELEM:a(t.MODAL_CLOSE_BUTTON_ELEM_SELECTOR),DEBUG_RESET_ELEM:a(t.DEBUG_ELEM_RESET_SELECTOR)})}(),e.showDebugNotice&&e.DEBUG_RESET_ELEM.addEventListener("click",e=>{window.localStorage.clear(),window.location.reload()})},"loading"!=document.readyState?o():document.addEventListener("DOMContentLoaded",o)}"undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window);var I={contentWebsite:function(e){e.websiteType=A.WEBSITE_TYPES.CONTENT,M(e)},marketingWebsite:function(e){e.websiteType=A.WEBSITE_TYPES.MARKETING,M(e)}};export default I;
//# sourceMappingURL=polite-email-popup.modern.js.map
