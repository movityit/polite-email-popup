!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).politeEmailPopup=n()}(this,function(){var e={};function n(e){document.body.insertAdjacentHTML("beforeend",e)}var t={};function o(e){return t[e]||document.querySelector(e)}var a,i,r=Object.prototype,l=Function.prototype.toString,s=r.hasOwnProperty,c=l.call(Object),d=r.toString,u=(a=Object.getPrototypeOf,i=Object,function(e){return a(i(e))});function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function p(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return m(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,void 0):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function b(){this.callbacksLookup={}}b.prototype={emit:function(e,n){for(var t,o=this.callbacksLookup["*"]||[],a=p(this.callbacksLookup[e]||[]);!(t=a()).done;)(0,t.value)({name:e,value:n});for(var i,r=p(o);!(i=r()).done;)(0,i.value)({name:e,value:n})},on:function(e,n){for(var t,o=p(Array.isArray(e)?e:[e]);!(t=o()).done;){var a=t.value;this.callbacksLookup[a]||(this.callbacksLookup[a]=[]),this.callbacksLookup[a].push(n)}}};var _=new b;function f(e,n){void 0===n&&(n={}),e=e||"tigerlily";var t=n.defaults,o=void 0===t?{}:t,a=JSON.parse(localStorage.getItem(e)||"{}",g);return a=Object.assign(o,a),new Proxy(a,function n(t){return{get:function(e,o){return E(e[o])?new Proxy(e[o],n(t)):e[o]},set:function(n,o,a){n[o]=a,localStorage.setItem(e,JSON.stringify(t,v));var i=n[o],r=E(i)?JSON.parse(JSON.stringify(i,v),g):i,m=E(a)?JSON.parse(JSON.stringify(a,v),g):a,p=function(e,n){if(e===n)return"";var t="";return function e(n,t,o){o=o||"",Array.isArray(n)?function(n,t,o){n.forEach((n,a,i)=>{const r=`${o}[${a}]`;t.call(i,n,a,i,r),e(i[a],t,r)})}(n,t,o):function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=d.call(e)||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}(e))return!1;var n=u(e);if(null===n)return!0;var t=s.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&l.call(t)==c}(n)&&function(n,t,o){for(const a in n){const i=o?`${o}.${a}`:a;t.call(n,n[a],a,n,i),e(n[a],t,i)}}(n,t,o)}(e,function(e,o,a,i){e===n&&(t=i)}),t}(t,a)||o;return _.emit(p,{prop:o,path:p,oldValue:r,value:m}),!0}}}(a))}function E(e){return"object"==typeof e&&null!==e&&!(e instanceof Date)}function v(e,n){if(this[e]instanceof Date){var t=this[e].getTime();return t?{__isDate:!0,ms:t}:void 0}return n}function g(e,n){return n.__isDate?new Date(n.ms):n}if(f.on=function(e,n){_.on(e,function(e){n(e.value)})},f("polite-email-popup"),window.matchMedia("only screen and (max-width: 780px)"),"undefined"!=typeof window){var T={get passive(){}};window.addEventListener("testPassive",null,T),window.removeEventListener("testPassive",null,T)}function O(t){var a;a=function(){var a,i,r,l;a=t,i={showDebugNotice:!1,websiteType:"content",beSlightlyMoreAggressive:!1,onSubmit:function(){console.log("Event: Email form submitted")},imageSrc:"",headingText:"Sign up for updates",descriptionText:"Get cutting edge articles and insights into our process",mainButtonText:"Sign up",closeButtonText:"Close",SELECTORS:{MODAL_ELEM_SELECTOR:".email-modal",MODAL_FORM_ELEM_SELECTOR:".email-modal__content",MODAL_CLOSE_BUTTON_ELEM_SELECTOR:".email-modal__close",DEBUG_ELEM_RESET_SELECTOR:".debug-emails-forms__reset"},WEBSITE_TYPES:{CONTENT:"CONTENT",MARKETING:"MARKETING"},IS_MOBILE:window.matchMedia("only screen and (max-width: 780px)").matches,FOCUSABLE_SELECTORS:"a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]",BODY_CLASS_MODAL_OPEN:"email-modal-is-open",DEBUG_UNIT_PAGE_VIEWS:"",DEBUG_UNIT_HIGHEST_SCROLL_PERCENTAGE:"%",DEBUG_UNIT_ACTIVE_TIME_ON_SITE:"s",DEBUG_UNIT_ACTIVE_TIME_ON_PAGE:"s"},Object.assign(e,i,a),window.temporaryGlobals=e,e.showDebugNotice&&n('<div class="debug-emails-forms">\n    <div>\n      <b>Page views: </b><span data-event-name="pageViews">0</span>\n    </div>\n    <div>\n      <b>Scroll percentage: </b><span data-event-name="highestScrollPercentage">0%</span>\n    </div>\n    <div>\n      <b>Time on site: </b><span data-event-name="activeTimeOnSite">0s</span>\n    </div>\n    <div>\n      <b>Time on page: </b><span data-event-name="activeTimeOnPage">0s</span>\n    </div>\n    <div>\n      <b>Saw modal: </b><span>never</span>\n    </div>\n    <div>\n      <b>Closed modal: </b><span>never</span>\n    </div>\n    <div>\n      <b>Closed bottom bar: </b><span>never</span>\n    </div>\n    <div>\n      <b>Modal is openable: </b><span data-event-name="modalIsOpenable">false</span>\n    </div>\n    <button class="debug-emails-forms__reset" type="button">Reset</button>\n  </div>'),n('\n<div class="email-modal" role="dialog" aria-labelledby="email-modal-title" aria-describedby="email-modal-description" aria-hidden="true" style="display: none">\n  <form class="email-modal__content" method="POST" action="/">\n    <div class="email-modal__top">\n      <div class="email-modal__top-media">\n        <img class="email-modal__top-image" src="'+(r=e).imageSrc+'">\n      </div>\n      <div class="email-modal__top-content">\n        <h2 class="email-modal__title" id="email-modal-title">'+r.headingText+'</h2>\n        <p class="email-modal__description" id="email-modal-description">'+r.descriptionText+'</p>\n      </div>\n    </div>\n    <div class="email-modal__input-container">\n      <input class="email-modal__input email-signup-form-input" type="email" value="" placeholder="email@example.com">\n    </div>\n    <div class="email-modal__button-container">\n      <button class="email-modal__sign-up" type="submit">'+r.mainButtonText+'</button>\n    </div>\n    <button class="email-modal__close" type="button"></button>\n  </form>\n</div>\n'),n(function(e){return'<div class="bottom-bar">\n  <form class="bottom-bar__content" method="POST" action="/">\n    <label class="bottom-bar__label">\n      <span class="bottom-bar__label-text">'+e.headingText+'</span>\n      <input class="bottom-bar__input email-signup-form-input" type="email" value="" placeholder="you@example.com">\n    </label>\n    <button class="bottom-bar__sign-up" type="submit">'+e.mainButtonText+'</button>\n  </form>\n  <div class="bottom-bar__close-container">\n    <button class="bottom-bar__close" type="button">'+e.closeButtonText+"</button>\n  </div>\n</div>"}(e)),l=e.SELECTORS,Object.assign(e,{MODAL_ELEM:o(l.MODAL_ELEM_SELECTOR),MODAL_FORM_ELEM:o(l.MODAL_FORM_ELEM_SELECTOR),MODAL_CLOSE_BUTTON_ELEM:o(l.MODAL_CLOSE_BUTTON_ELEM_SELECTOR),DEBUG_RESET_ELEM:o(l.DEBUG_ELEM_RESET_SELECTOR)}),e.showDebugNotice&&e.DEBUG_RESET_ELEM.addEventListener("click",function(e){window.localStorage.clear(),window.location.reload()})},"loading"!=document.readyState?a():document.addEventListener("DOMContentLoaded",a)}return"undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window),{contentWebsite:function(e){e.websiteType="CONTENT",O(e)},marketingWebsite:function(e){e.websiteType="MARKETING",O(e)}}});
//# sourceMappingURL=polite-email-popup.umd.js.map
