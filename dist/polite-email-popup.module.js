var e={};function t(e){document.body.insertAdjacentHTML("beforeend",e)}var n={};function o(e){return n[e]||document.querySelector(e)}var i,a,r=Object.prototype,l=Function.prototype.toString,c=r.hasOwnProperty,s=l.call(Object),u=r.toString,d=(i=Object.getPrototypeOf,a=Object,function(e){return i(a(e))});function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function E(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function v(){this.callbacksLookup={}}v.prototype={emit:function(e,t){for(var n,o=this.callbacksLookup["*"]||[],i=E(this.callbacksLookup[e]||[]);!(n=i()).done;)(0,n.value)({name:e,value:t});for(var a,r=E(o);!(a=r()).done;)(0,a.value)({name:e,value:t})},on:function(e,t){for(var n,o=E(Array.isArray(e)?e:[e]);!(n=o()).done;){var i=n.value;this.callbacksLookup[i]||(this.callbacksLookup[i]=[]),this.callbacksLookup[i].push(t)}}};var f=new v;function _(e,t){void 0===t&&(t={}),e=e||"tigerlily";var n=t.defaults,o=void 0===n?{}:n,i=JSON.parse(localStorage.getItem(e)||"{}",g);return i=Object.assign(o,i),new Proxy(i,function t(n){return{get:function(e,o){return b(e[o])?new Proxy(e[o],t(n)):e[o]},set:function(t,o,i){t[o]=i,localStorage.setItem(e,JSON.stringify(n,p));var a=t[o],r=b(a)?JSON.parse(JSON.stringify(a,p),g):a,m=b(i)?JSON.parse(JSON.stringify(i,p),g):i,E=function(e,t){if(e===t)return"";var n="";return function e(t,n,o){o=o||"",Array.isArray(t)?function(t,n,o){t.forEach((t,i,a)=>{const r=`${o}[${i}]`;n.call(a,t,i,a,r),e(a[i],n,r)})}(t,n,o):function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=u.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=d(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==s}(t)&&function(t,n,o){for(const i in t){const a=o?`${o}.${i}`:i;n.call(t,t[i],i,t,a),e(t[i],n,a)}}(t,n,o)}(e,function(e,o,i,a){e===t&&(n=a)}),n}(n,i)||o;return f.emit(E,{prop:o,path:E,oldValue:r,value:m}),!0}}}(i))}function b(e){return"object"==typeof e&&null!==e&&!(e instanceof Date)}function p(e,t){if(this[e]instanceof Date){var n=this[e].getTime();return n?{__isDate:!0,ms:n}:void 0}return t}function g(e,t){return t.__isDate?new Date(t.ms):t}_.on=function(e,t){f.on(e,function(e){t(e.value)})};var L=_("polite-email-popup");function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var S=!1;if("undefined"!=typeof window){var y={get passive(){S=!0}};window.addEventListener("testPassive",null,y),window.removeEventListener("testPassive",null,y)}var T="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),h=[],M=!1,A=-1,w=void 0,D=void 0,C=function(e){return h.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},R=function(e){var t=e||window.event;return!!C(t.target)||t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)};function N(){document.body.classList.remove(e.BODY_CLASS_MODAL_OPEN),e.MODAL_ELEM.style.display="none",document.querySelectorAll(e.FOCUSABLE_SELECTORS).forEach(function(e){return e.removeAttribute("tabindex")}),document.querySelectorAll("body > [aria-hidden]").forEach(function(e){return e.removeAttribute("aria-hidden")}),e.MODAL_ELEM.setAttribute("aria-hidden","true"),e.activeElement&&e.activeElement.focus(),function(e){if(T){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,h=h.filter(function(t){return t.targetElement!==e}),M&&0===h.length&&(document.removeEventListener("touchmove",R,S?{passive:!1}:void 0),M=!1)}else(h=h.filter(function(t){return t.targetElement!==e})).length||setTimeout(function(){void 0!==D&&(document.body.style.paddingRight=D,D=void 0),void 0!==w&&(document.body.style.overflow=w,w=void 0)})}(e.MODAL_ELEM)}function B(n){var i;i=function(){var i,a,r,l,c;i=n,a={showDebugNotice:!1,websiteType:"content",beSlightlyMoreAggressive:!1,onSubmit:function(){console.log("Event: Email form submitted")},imageSrc:"",headingText:"Sign up for updates",descriptionText:"Get cutting edge articles and insights into our process",mainButtonText:"Sign up",closeButtonText:"Close",SELECTORS:{MODAL_ELEM_SELECTOR:".email-modal",MODAL_FORM_ELEM_SELECTOR:".email-modal__content",MODAL_FORM_INPUT_ELEM_SELECTOR:".email-signup-form-input",MODAL_CLOSE_BUTTON_ELEM_SELECTOR:".email-modal__close",DEBUG_ELEM_RESET_SELECTOR:".debug-emails-forms__reset"},WEBSITE_TYPES:{CONTENT:"CONTENT",MARKETING:"MARKETING"},IS_MOBILE:window.matchMedia("only screen and (max-width: 780px)").matches,FOCUSABLE_SELECTORS:"a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]",BODY_CLASS_MODAL_OPEN:"email-modal-is-open",DEBUG_UNIT_PAGE_VIEWS:"",DEBUG_UNIT_HIGHEST_SCROLL_PERCENTAGE:"%",DEBUG_UNIT_ACTIVE_TIME_ON_SITE:"s",DEBUG_UNIT_ACTIVE_TIME_ON_PAGE:"s"},Object.assign(e,a,i),window.temporaryGlobals=e,L.pageViews++,L.activeTimeOnPage=0,window.addEventListener("scroll",function(e,t){var n=!0,o=!1;return function(){var t=arguments;o||(o=!0,setTimeout(function(){e.apply(void 0,[].slice.call(t)),o=!1},n?0:1e3),n=!1)}}(function(){var e,t,n;t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),n=window.pageYOffset/(t-document.documentElement.clientHeight),(e=Math.floor(100*n))>L.highestScrollPercentageAcrossAllPages&&(L.highestScrollPercentageAcrossAllPages=e),L.activeTimeOnPage++,L.activeTimeOnSite++})),e.showDebugNotice&&t('<div class="debug-emails-forms">\n    <div>\n      <b>Page views: </b><span data-event-name="pageViews">0</span>\n    </div>\n    <div>\n      <b>Scroll percentage: </b><span data-event-name="highestScrollPercentage">0%</span>\n    </div>\n    <div>\n      <b>Time on site: </b><span data-event-name="activeTimeOnSite">0s</span>\n    </div>\n    <div>\n      <b>Time on page: </b><span data-event-name="activeTimeOnPage">0s</span>\n    </div>\n    <div>\n      <b>Saw modal: </b><span>never</span>\n    </div>\n    <div>\n      <b>Closed modal: </b><span>never</span>\n    </div>\n    <div>\n      <b>Closed bottom bar: </b><span>never</span>\n    </div>\n    <div>\n      <b>Modal is openable: </b><span data-event-name="modalIsOpenable">false</span>\n    </div>\n    <button class="debug-emails-forms__reset" type="button">Reset</button>\n  </div>'),t('\n<div class="email-modal" role="dialog" aria-labelledby="email-modal-title" aria-describedby="email-modal-description" aria-hidden="true" style="display: none">\n  <form class="email-modal__content" method="POST" action="/">\n    <div class="email-modal__top">\n      <div class="email-modal__top-media">\n        <img class="email-modal__top-image" src="'+(r=e).imageSrc+'">\n      </div>\n      <div class="email-modal__top-content">\n        <h2 class="email-modal__title" id="email-modal-title">'+r.headingText+'</h2>\n        <p class="email-modal__description" id="email-modal-description">'+r.descriptionText+'</p>\n      </div>\n    </div>\n    <div class="email-modal__input-container">\n      <input class="email-modal__input email-signup-form-input" type="email" value="" placeholder="email@example.com">\n    </div>\n    <div class="email-modal__button-container">\n      <button class="email-modal__sign-up" type="submit">'+r.mainButtonText+'</button>\n    </div>\n    <button class="email-modal__close" type="button"></button>\n  </form>\n</div>\n'),t('<div class="bottom-bar">\n  <form class="bottom-bar__content" method="POST" action="/">\n    <label class="bottom-bar__label">\n      <span class="bottom-bar__label-text">'+e.headingText+'</span>\n      <input class="bottom-bar__input email-signup-form-input" type="email" value="" placeholder="you@example.com">\n    </label>\n    <button class="bottom-bar__sign-up" type="submit">'+e.mainButtonText+'</button>\n  </form>\n  <div class="bottom-bar__close-container">\n    <button class="bottom-bar__close" type="button">'+e.closeButtonText+"</button>\n  </div>\n</div>"),l=e.SELECTORS,Object.assign(e,{MODAL_ELEM:o(l.MODAL_ELEM_SELECTOR),MODAL_FORM_ELEM:o(l.MODAL_FORM_ELEM_SELECTOR),MODAL_CLOSE_BUTTON_ELEM:o(l.MODAL_CLOSE_BUTTON_ELEM_SELECTOR),DEBUG_RESET_ELEM:o(l.DEBUG_ELEM_RESET_SELECTOR)}),e.showDebugNotice&&e.DEBUG_RESET_ELEM.addEventListener("click",function(e){window.localStorage.clear(),window.location.reload()}),c=function(){L.isModalOpenable&&function(){e.activeElement=document.activeElement,e.MODAL_ELEM.style.display="flex",document.body.classList.add(e.BODY_CLASS_MODAL_OPEN),e.MODAL_ELEM.querySelector(e.FOCUSABLE_SELECTORS).focus();var t=document.querySelectorAll(e.FOCUSABLE_SELECTORS),n=globals.modalElem.querySelectorAll(e.FOCUSABLE_SELECTORS),o=Array.from(n);t.forEach(function(e){o.includes(e)||e.setAttribute("tabindex","-1")}),e.MODAL_ELEM.removeAttribute("aria-hidden"),Array.from(document.body.children).forEach(function(t){t!==e.MODAL_ELEM&&t.setAttribute("aria-hidden","true")}),function(e,t){if(T){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!h.some(function(t){return t.targetElement===e})){var n={targetElement:e,options:{}};h=[].concat(O(h),[n]),e.ontouchstart=function(e){1===e.targetTouches.length&&(A=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-A;!C(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?R(e):e.stopPropagation())}(t,e)},M||(document.addEventListener("touchmove",R,S?{passive:!1}:void 0),M=!0)}}else{setTimeout(function(){void 0===D&&(window,document),void 0===w&&(w=document.body.style.overflow,document.body.style.overflow="hidden")});var o={targetElement:e,options:{}};h=[].concat(O(h),[o])}}(e.MODAL_ELEM)}()},document.addEventListener("mouseout",function(e){var t=e.clientY<20,n=null===e.relatedTarget,o="select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase();t&&n&&o&&c&&c()}),e.MODAL_ELEM.addEventListener("click",function(t){({event:t}).event.target.closest(e.SELECTORS.MODAL_FORM_ELEM_SELECTOR)||N()}),e.MODAL_FORM_ELEM.addEventListener("submit",function(t){return function(t){var n=t.event;n.preventDefault();var o=n.currentTarget.querySelector(e.SELECTORS.MODAL_FORM_INPUT_ELEM_SELECTOR);e.onSubmit({event:n,email:o.value}),N()}({event:t})}),e.MODAL_CLOSE_BUTTON_ELEM.addEventListener("click",function(){return N()}),document.addEventListener("keydown",function(t){27==={event:t}.event.keyCode&&document.body.classList.contains(e.BODY_CLASS_MODAL_OPEN)&&N()})},"loading"!=document.readyState?i():document.addEventListener("DOMContentLoaded",i)}window.matchMedia("only screen and (max-width: 780px)");var P={contentWebsite:function(e){e.websiteType="CONTENT",B(e)},marketingWebsite:function(e){e.websiteType="MARKETING",B(e)}};export default P;
//# sourceMappingURL=polite-email-popup.module.js.map
