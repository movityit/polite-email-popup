{"version":3,"file":"polite-email-popup.modern.js","sources":["../node_modules/tigerlily/dist/tigerlily.module.js","../src/persistent-globals/persistent-globals.js","../src/temporary-globals/temporary-globals.js","../src/helpers/helpers.js","../src/trigger-popups/modal-requirements/get-trigger-requirements.js","../src/trigger-popups/bottom-bar-requirements/get-trigger-requirements.js","../src/trigger-popups/watch-trigger-data.js","../src/trigger-popups/modal-requirements/meets-trigger-requirements.js","../src/trigger-popups/bottom-bar-requirements/meets-trigger-requirements.js","../src/bottom-bar/bottom-bar-actions/open-bottom-bar.js","../src/debug-notice/update-debug-notice.js","../src/debug-notice/get-debug-notice-template-string.js","../src/dom/get-elem.js","../src/persistent-globals/init-persistent-globals.js","../src/dom/add-html-to-page.js","../node_modules/notyf/notyf.es.js","../src/helpers/notifications.js","../src/bottom-bar/bottom-bar-actions/close-bottom-bar.js","../node_modules/body-scroll-lock/lib/bodyScrollLock.mjs","../src/modal/modal-actions/close-modal.js","../src/event-handlers/on-submit.js","../src/integrations/mailchimp.js","../src/modal/init-modal-event-listeners.js","../src/init-email-forms.js","../src/dom/dom-ready.js","../src/helpers/on-exit-intent.js","../src/temporary-globals/init-temporary-globals.js","../src/dom/init-dom-elements.js","../src/helpers/get-styles-string.js","../src/modal/get-modal-template-string.js","../src/bottom-bar/get-bottom-bar-template-string.js","../src/dom/init-elem-globals.js","../node_modules/stormcloud/dist/stormcloud.module.js","../src/debug-notice/init-debug-notice-event-listeners.js","../src/modal/init-exit-intent.js","../src/modal/modal-actions/open-modal.js","../src/bottom-bar/init-bottom-bar-event-listeners.js","../src/index.js"],"sourcesContent":["var t,r,n=Object.prototype,e=Function.prototype.toString,o=n.hasOwnProperty,a=e.call(Object),i=n.toString,c=(t=Object.getPrototypeOf,r=Object,function(n){return t(r(n))});function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function l(t,r){var n;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,r){if(t){if(\"string\"==typeof t)return u(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,void 0):void 0}}(t))||r&&t&&\"number\"==typeof t.length){n&&(t=n);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(n=t[Symbol.iterator]()).next.bind(n)}function f(){this.callbacksLookup={}}f.prototype={emit:function(t,r){for(var n,e=this.callbacksLookup[\"*\"]||[],o=l(this.callbacksLookup[t]||[]);!(n=o()).done;)(0,n.value)({name:t,value:r});for(var a,i=l(e);!(a=i()).done;)(0,a.value)({name:t,value:r})},on:function(t,r){for(var n,e=l(Array.isArray(t)?t:[t]);!(n=e()).done;){var o=n.value;this.callbacksLookup[o]||(this.callbacksLookup[o]=[]),this.callbacksLookup[o].push(r)}}};var s=new f;function y(t,r){void 0===r&&(r={}),t=t||\"tigerlily\";var n=r.defaults,u=void 0===n?{}:n,l=JSON.parse(localStorage.getItem(t)||\"{}\",b);return l=Object.assign(u,l),new Proxy(l,function r(n){return{get:function(t,e){return p(t[e])?new Proxy(t[e],r(n)):t[e]},set:function(r,u,l){r[u]=l,localStorage.setItem(t,JSON.stringify(n,v));var f=r[u],y=p(f)?JSON.parse(JSON.stringify(f,v),b):f,g=p(l)?JSON.parse(JSON.stringify(l,v),b):l,d=function(t,r){if(t===r)return\"\";var n=\"\";return function t(r,n,u){u=u||\"\",Array.isArray(r)?function(r,n,e){r.forEach((r,o,a)=>{const i=`${e}[${o}]`;n.call(a,r,o,a,i),t(a[o],n,i)})}(r,n,u):function(t){if(!function(t){return!!t&&\"object\"==typeof t}(t)||\"[object Object]\"!=i.call(t)||function(t){var r=!1;if(null!=t&&\"function\"!=typeof t.toString)try{r=!!(t+\"\")}catch(t){}return r}(t))return!1;var r=c(t);if(null===r)return!0;var n=o.call(r,\"constructor\")&&r.constructor;return\"function\"==typeof n&&n instanceof n&&e.call(n)==a}(r)&&function(r,n,e){for(const o in r){const a=e?`${e}.${o}`:o;n.call(r,r[o],o,r,a),t(r[o],n,a)}}(r,n,u)}(t,function(t,e,o,a){t===r&&(n=a)}),n}(n,l)||u;return s.emit(d,{prop:u,path:d,oldValue:y,value:g}),!0}}}(l))}function p(t){return Array.isArray(t)||\"[object Object]\"===Object.prototype.toString.call(t)}function v(t,r){if(this[t]instanceof Date){var n=this[t].getTime();return n?{__isDate:!0,ms:n}:void 0}return r}function b(t,r){return p(r)&&r.__isDate?new Date(r.ms):r}y.on=function(t,r){s.on(t,function(t){r(t.value)})};export default y;\n//# sourceMappingURL=tigerlily.module.js.map\n","import tigerlily from \"tigerlily\";\n\nlet persistentGlobals;\n\nif (!persistentGlobals) {\n  persistentGlobals = tigerlily('polite-email-popup');\n}\n\nwindow.persistentGlobals = persistentGlobals; // todo remove\n\nexport {tigerlily, persistentGlobals};","export default {};","import {persistentGlobals} from \"../persistent-globals/persistent-globals\";\n\nexport function getDaysSinceModalClosed () {\n  return getDaysSinceClosed(\"modal\");\n}\n\nexport function getDaysSinceBottomBarClosed () {\n  return getDaysSinceClosed(\"bottom-bar\");\n}\n\nfunction getDaysSinceClosed (popupType) {\n  let closedDate = popupType === \"modal\" ? persistentGlobals.modalClosedDate : persistentGlobals.bottomBarClosedDate;\n\n  if (!closedDate) {\n    return;\n  }\n\n  let oneDay = 1000 * 60 * 60 * 24;\n  let days = Math.floor((Date.now() - closedDate) / oneDay);\n\n  return {days};\n}\n","import {persistentGlobals} from \"../../persistent-globals/persistent-globals\";\nimport temporaryGlobals from \"../../temporary-globals/temporary-globals\";\n\nconst minimumsLookup = {\n  \"pageViews\": {\n    \"content\": {\n      \"notAggressive\": 0,\n      \"aggressive\": 0\n    },\n    \"marketing\": {\n      \"notAggressive\": 2,\n      \"aggressive\": 1\n    }\n  },\n  \"activeTimeOnPage\": {\n    \"content\": {\n      \"notAggressive\": 6,\n      \"aggressive\": 4\n    },\n    \"marketing\": {\n      \"notAggressive\": 6,\n      \"aggressive\": 4\n    }\n  },\n  \"activeTimeOnSite\": {\n    \"content\": {\n      \"notAggressive\": 21,\n      \"aggressive\": 14\n    },\n    \"marketing\": {\n      \"notAggressive\": 21,\n      \"aggressive\": 14\n    }\n  },\n  \"highestScrollPercentageAcrossAllPages\": {\n    \"content\": {\n      \"notAggressive\": 35,\n      \"aggressive\": 25\n    },\n    \"marketing\": {\n      \"notAggressive\": 35,\n      \"aggressive\": 25\n    }\n  }\n};\n\nexport default function getTriggerRequirements () {\n  let websiteType = temporaryGlobals.websiteType;\n  let aggressive = temporaryGlobals.beSlightlyMoreAggressive ? \"aggressive\" : \"notAggressive\";\n\n  const minimums = {\n    pageViews: minimumsLookup[\"pageViews\"][websiteType][aggressive],\n    activeTimeOnPage: minimumsLookup[\"activeTimeOnPage\"][websiteType][aggressive],\n    activeTimeOnSite: minimumsLookup[\"activeTimeOnSite\"][websiteType][aggressive],\n    highestScrollPercentageAcrossAllPages: minimumsLookup[\"highestScrollPercentageAcrossAllPages\"][websiteType][aggressive]\n  };\n\n  const actual = {\n    pageViews: persistentGlobals[\"pageViews\"],\n    activeTimeOnPage: persistentGlobals[\"activeTimeOnPage\"],\n    activeTimeOnSite: persistentGlobals[\"activeTimeOnSite\"],\n    highestScrollPercentageAcrossAllPages: persistentGlobals[\"highestScrollPercentageAcrossAllPages\"],\n  }\n\n  return [minimums, actual];\n}\n\n\n\n","import {persistentGlobals} from \"../../persistent-globals/persistent-globals\";\nimport temporaryGlobals from \"../../temporary-globals/temporary-globals\";\n\nconst minimumsLookup = {\n  \"pageViews\": {\n    \"content\": {\n      \"notAggressive\": 0,\n      \"aggressive\": 0\n    },\n    \"marketing\": {\n      \"notAggressive\": 0,\n      \"aggressive\": 0\n    }\n  },\n  \"activeTimeOnPage\": {\n    \"content\": {\n      \"notAggressive\": 0,\n      \"aggressive\": 0\n    },\n    \"marketing\": {\n      \"notAggressive\": 0,\n      \"aggressive\": 0\n    }\n  },\n  \"activeTimeOnSite\": {\n    \"content\": {\n      \"notAggressive\": 10,\n      \"aggressive\": 7\n    },\n    \"marketing\": {\n      \"notAggressive\": 10,\n      \"aggressive\": 7\n    }\n  },\n  \"highestScrollPercentageAcrossAllPages\": {\n    \"content\": {\n      \"notAggressive\": 25,\n      \"aggressive\": 20\n    },\n    \"marketing\": {\n      \"notAggressive\": 25,\n      \"aggressive\": 20\n    }\n  }\n};\n\nexport default function getTriggerRequirements () {\n  let websiteType = temporaryGlobals.websiteType;\n  let aggressive = temporaryGlobals.beSlightlyMoreAggressive ? \"aggressive\" : \"notAggressive\";\n\n  const minimums = {\n    pageViews: minimumsLookup[\"pageViews\"][websiteType][aggressive],\n    activeTimeOnPage: minimumsLookup[\"activeTimeOnPage\"][websiteType][aggressive],\n    activeTimeOnSite: minimumsLookup[\"activeTimeOnSite\"][websiteType][aggressive],\n    highestScrollPercentageAcrossAllPages: minimumsLookup[\"highestScrollPercentageAcrossAllPages\"][websiteType][aggressive]\n  };\n\n  const actual = {\n    pageViews: persistentGlobals[\"pageViews\"],\n    activeTimeOnPage: persistentGlobals[\"activeTimeOnPage\"],\n    activeTimeOnSite: persistentGlobals[\"activeTimeOnSite\"],\n    highestScrollPercentageAcrossAllPages: persistentGlobals[\"highestScrollPercentageAcrossAllPages\"],\n  }\n\n  return [minimums, actual];\n}\n\n\n\n","import {tigerlily} from \"../persistent-globals/persistent-globals\";\nimport temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport updateDebugNotice from \"../debug-notice/update-debug-notice\";\nimport modalMeetsTriggerRequirements from \"./modal-requirements/meets-trigger-requirements\";\nimport bottomBarMeetsTriggerRequirements from \"./bottom-bar-requirements/meets-trigger-requirements\";\nimport openBottomBar from \"../bottom-bar/bottom-bar-actions/open-bottom-bar\";\n\nexport function watchTriggerData () {\n  tigerlily.on(\"*\", whenTriggerDataChanges);\n}\n\nexport function whenTriggerDataChanges () {\n\n  // TRIGGER REQUIREMENTS\n  let [modalMeetsRequirements, modalRequirements, modalActualValues] = modalMeetsTriggerRequirements();\n  let [bottomBarMeetsRequirements, bottomBarRequirements, bottomBarActualValues] = bottomBarMeetsTriggerRequirements();\n\n  if (modalMeetsRequirements) {\n    temporaryGlobals.isModalOpenable = true;\n  } else {\n    temporaryGlobals.isModalOpenable = false;\n  }\n\n  if (bottomBarMeetsRequirements) {\n    openBottomBar();\n  }\n\n  if (temporaryGlobals.showDebugNotice) {\n    updateDebugNotice({modalRequirements, modalActualValues, modalMeetsRequirements, bottomBarRequirements, bottomBarActualValues, bottomBarMeetsRequirements});\n  }\n\n}","import getTriggerRequirements from \"./get-trigger-requirements\";\nimport {getDaysSinceModalClosed} from \"../../helpers/helpers\";\nimport temporaryGlobals from \"../../temporary-globals/temporary-globals\";\n\nexport default function meetsTriggerRequirements () {\n  let [requirements, actual] = getTriggerRequirements();\n\n  // compare all the requirements to the actual values\n  let meetsRequirements = Object.keys(requirements).every(key => {\n    return actual[key] >= requirements[key];\n  });\n\n  // must wait a few days before opening the modal again\n  let daysSinceModalClosed = getDaysSinceModalClosed();\n  if (daysSinceModalClosed) {\n    meetsRequirements = meetsRequirements && daysSinceModalClosed.days >= 2;\n  }\n\n  // can't open the modal twice\n  if (temporaryGlobals.isModalOpen) {\n    meetsRequirements = false;\n  }\n\n  return [meetsRequirements, requirements, actual];\n}\n\n\n\n","import getTriggerRequirements from \"./get-trigger-requirements\";\nimport {getDaysSinceBottomBarClosed} from \"../../helpers/helpers\";\n\nexport default function meetsTriggerRequirements () {\n  let [requirements, actual] = getTriggerRequirements();\n\n  let meetsRequirements = Object.keys(requirements).every(key => {\n    return actual[key] >= requirements[key];\n  });\n\n  let daysSinceBottomBarClosed = getDaysSinceBottomBarClosed();\n  if (daysSinceBottomBarClosed) {\n    meetsRequirements = meetsRequirements && daysSinceBottomBarClosed.days >= 2;\n  }\n\n  return [meetsRequirements, requirements, actual];\n}\n\n\n\n","import temporaryGlobals from \"../../temporary-globals/temporary-globals\";\n\nexport default function openBottomBar () {\n  temporaryGlobals.BOTTOM_BAR_ELEM.classList.add(\"show\");\n  document.body.classList.add(temporaryGlobals.BODY_CLASS_BOTTOM_BAR_OPEN);\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport getDebugNoticeTemplateString from \"./get-debug-notice-template-string\";\n\nexport default function updateDebugNotice ({modalRequirements, modalActualValues, modalMeetsRequirements, bottomBarRequirements, bottomBarActualValues, bottomBarMeetsRequirements}) {\n  temporaryGlobals.DEBUG_NOTICE_ELEM.innerHTML = getDebugNoticeTemplateString({modalRequirements, modalActualValues, modalMeetsRequirements, bottomBarRequirements, bottomBarActualValues, bottomBarMeetsRequirements});\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport {getDaysSinceModalClosed, getDaysSinceBottomBarClosed} from \"../helpers/helpers\";\n\nexport default function getDebugNoticeTemplateString ({modalRequirements, modalActualValues, modalMeetsRequirements, bottomBarRequirements, bottomBarActualValues, bottomBarMeetsRequirements}) {\n  let daysSinceModalClosed = getDaysSinceModalClosed();\n  let daysSinceBottomBarClosed = getDaysSinceBottomBarClosed();\n\n  return `<div class=\"debug-email-forms\">\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Website type: </span>\n    <span class=\"debug-email-forms__stat-value\">${temporaryGlobals.websiteType.charAt(0).toUpperCase() + temporaryGlobals.websiteType.slice(1)} website</span>\n  </div>\n  <div class=\"debug-email-forms__stat debug-email-forms__stat--buttons\">\n    <button class=\"debug-email-forms__reset\" type=\"button\">Reset data</button>\n    <button class=\"debug-email-forms__bypass\" type=\"button\">Bypass requirements</button>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Page views: </span>\n    <span class=\"debug-email-forms__stat-value\">${modalActualValues.pageViews}</span>\n    <ul class=\"debug-email-forms__stat-requirements\">\n      <li class=\"debug-email-forms__stat-requirement\">Modal requires: ${modalRequirements.pageViews}</li>\n      <li class=\"debug-email-forms__stat-requirement\">Bottom bar requires: ${bottomBarRequirements.pageViews}</li>\n    </ul>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Highest scroll percentage: </span>\n    <span class=\"debug-email-forms__stat-value\">${modalActualValues.highestScrollPercentageAcrossAllPages}% </span>\n    <ul class=\"debug-email-forms__stat-requirements\">\n      <li class=\"debug-email-forms__stat-requirement\">Modal requires: ${modalRequirements.highestScrollPercentageAcrossAllPages}%</li>\n      <li class=\"debug-email-forms__stat-requirement\">Bottom bar requires: ${bottomBarRequirements.highestScrollPercentageAcrossAllPages}%</li>\n    </ul>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Active time on site: </span>\n    <span class=\"debug-email-forms__stat-value\">${modalActualValues.activeTimeOnSite}s </span>\n    <ul class=\"debug-email-forms__stat-requirements\">\n      <li class=\"debug-email-forms__stat-requirement\">Modal requires: ${modalRequirements.activeTimeOnSite}s</li>\n      <li class=\"debug-email-forms__stat-requirement\">Bottom bar requires: ${bottomBarRequirements.activeTimeOnSite}s</li>\n    </ul>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Active time on page: </span>\n    <span class=\"debug-email-forms__stat-value\">${modalActualValues.activeTimeOnPage}s </span>\n    <ul class=\"debug-email-forms__stat-requirements\">\n      <li class=\"debug-email-forms__stat-requirement\">Modal requires: ${modalRequirements.activeTimeOnPage}s</li>\n      <li class=\"debug-email-forms__stat-requirement\">Bottom bar requires: ${bottomBarRequirements.activeTimeOnPage}s</li>\n    </ul>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Modal was closed: </span>\n    <span class=\"debug-email-forms__stat-value\">${daysSinceModalClosed ? (daysSinceModalClosed.days + ` day${daysSinceModalClosed.days !== 1 ? \"s\" : \"\"} ago`) : \"never\"}</span>\n    <ul class=\"debug-email-forms__stat-requirements\">\n      <li class=\"debug-email-forms__stat-requirement\">Requires: never or 2 days ago</li>\n    </ul>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Bottom bar was closed: </span>\n    <span class=\"debug-email-forms__stat-value\">${daysSinceBottomBarClosed ? (daysSinceBottomBarClosed.days + ` day${daysSinceBottomBarClosed.days !== 1 ? \"s\" : \"\"} ago`) : \"never\"}</span>\n    <ul class=\"debug-email-forms__stat-requirements\">\n      <li class=\"debug-email-forms__stat-requirement\">Requires: never or 2 days ago</li>\n    </ul>\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Modal is openable: </span>\n    ${modalMeetsRequirements ? '<span class=\"debug-email-forms__stat-value debug-email-forms__stat-value--success\">Yes</span>' : '<span class=\"debug-email-forms__stat-value debug-email-forms__stat-value--fail\">No</span>'}\n  </div>\n  <div class=\"debug-email-forms__stat\">\n    <span class=\"debug-email-forms__stat-label\">Bottom bar is open: </span>\n    ${bottomBarMeetsRequirements ? '<span class=\"debug-email-forms__stat-value debug-email-forms__stat-value--success\">Yes</span>' : '<span class=\"debug-email-forms__stat-value debug-email-forms__stat-value--fail\">No</span>'}\n  </div>\n</div>`;\n}","let cache = {};\n// caches result of getting an element\nexport default function getElem (selector) {\n  return cache[selector] || document.querySelector(selector);\n}","import {throttle} from \"stormcloud\";\nimport {persistentGlobals} from \"./persistent-globals\";\n\n/*\n\n  Keep track of:\n  - pageViews\n  - activeTimeOnPage\n  - activeTimeOnSite\n  - highestScrollPercentageAcrossAllPages\n\n*/ \nexport default function initPersistentGlobals (allOptions) {\n  if (!isNumberDefined(persistentGlobals.pageViews)) {\n    persistentGlobals.pageViews = 1;\n  } else {\n    persistentGlobals.pageViews++;\n  }\n\n  if (!isNumberDefined(persistentGlobals.highestScrollPercentageAcrossAllPages)) {\n    persistentGlobals.highestScrollPercentageAcrossAllPages = 0;\n  }\n\n  if (!isNumberDefined(persistentGlobals.activeTimeOnSite)) {\n    persistentGlobals.activeTimeOnSite = 0;\n  }\n\n  // refresh this value for every page\n  persistentGlobals.activeTimeOnPage = 0;\n\n  watchCurrentScrollPercentage();\n}\n\nfunction isNumberDefined (val) {\n  return typeof val === \"number\" && !Number.isNaN(val);\n}\n\nfunction watchCurrentScrollPercentage () {\n  window.addEventListener('scroll', throttle(function () {\n    // will execute once for every second the user is scrolling\n    setHighestScrollPercentage();\n    persistentGlobals.activeTimeOnPage++;\n    persistentGlobals.activeTimeOnSite++;\n  }, 1000));\n}\n\nfunction setHighestScrollPercentage () {\n  let currentScrollPercentage = getScrollPercentage();\n  if (currentScrollPercentage > persistentGlobals.highestScrollPercentageAcrossAllPages) {\n    persistentGlobals.highestScrollPercentageAcrossAllPages = currentScrollPercentage;\n  }\n}\n\nfunction getScrollPercentage () {\n  // get the scroll height of the document (https://javascript.info/size-and-scroll-window#width-height-of-the-document) \n  let docScrollHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight);\n  // calculate scroll percentage (subtract browser height since that's not actually scrollable)\n  let scrollPercentage = window.pageYOffset / (docScrollHeight - document.documentElement.clientHeight);\n  // calculate percentage\n  return Math.floor(scrollPercentage * 100);\n}\n\n\n\n","export default function addHtmlToPage (htmlString) {\n  document.body.insertAdjacentHTML(\"beforeend\", htmlString);\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar NotyfNotification = /** @class */ (function () {\r\n    function NotyfNotification(options) {\r\n        this.options = options;\r\n        this.listeners = {};\r\n    }\r\n    NotyfNotification.prototype.on = function (eventType, cb) {\r\n        var callbacks = this.listeners[eventType] || [];\r\n        this.listeners[eventType] = callbacks.concat([cb]);\r\n    };\r\n    NotyfNotification.prototype.triggerEvent = function (eventType, event) {\r\n        var _this = this;\r\n        var callbacks = this.listeners[eventType] || [];\r\n        callbacks.forEach(function (cb) { return cb({ target: _this, event: event }); });\r\n    };\r\n    return NotyfNotification;\r\n}());\r\nvar NotyfArrayEvent;\r\n(function (NotyfArrayEvent) {\r\n    NotyfArrayEvent[NotyfArrayEvent[\"Add\"] = 0] = \"Add\";\r\n    NotyfArrayEvent[NotyfArrayEvent[\"Remove\"] = 1] = \"Remove\";\r\n})(NotyfArrayEvent || (NotyfArrayEvent = {}));\r\nvar NotyfArray = /** @class */ (function () {\r\n    function NotyfArray() {\r\n        this.notifications = [];\r\n    }\r\n    NotyfArray.prototype.push = function (elem) {\r\n        this.notifications.push(elem);\r\n        this.updateFn(elem, NotyfArrayEvent.Add, this.notifications);\r\n    };\r\n    NotyfArray.prototype.splice = function (index, num) {\r\n        var elem = this.notifications.splice(index, num)[0];\r\n        this.updateFn(elem, NotyfArrayEvent.Remove, this.notifications);\r\n        return elem;\r\n    };\r\n    NotyfArray.prototype.indexOf = function (elem) {\r\n        return this.notifications.indexOf(elem);\r\n    };\r\n    NotyfArray.prototype.onUpdate = function (fn) {\r\n        this.updateFn = fn;\r\n    };\r\n    return NotyfArray;\r\n}());\n\nvar NotyfEvent;\r\n(function (NotyfEvent) {\r\n    NotyfEvent[\"Dismiss\"] = \"dismiss\";\r\n    NotyfEvent[\"Click\"] = \"click\";\r\n})(NotyfEvent || (NotyfEvent = {}));\r\nvar DEFAULT_OPTIONS = {\r\n    types: [\r\n        {\r\n            type: 'success',\r\n            className: 'notyf__toast--success',\r\n            backgroundColor: '#3dc763',\r\n            icon: {\r\n                className: 'notyf__icon--success',\r\n                tagName: 'i',\r\n            },\r\n        },\r\n        {\r\n            type: 'error',\r\n            className: 'notyf__toast--error',\r\n            backgroundColor: '#ed3d3d',\r\n            icon: {\r\n                className: 'notyf__icon--error',\r\n                tagName: 'i',\r\n            },\r\n        },\r\n    ],\r\n    duration: 2000,\r\n    ripple: true,\r\n    position: {\r\n        x: 'right',\r\n        y: 'bottom',\r\n    },\r\n    dismissible: false,\r\n};\n\nvar NotyfView = /** @class */ (function () {\r\n    function NotyfView() {\r\n        this.notifications = [];\r\n        this.events = {};\r\n        this.X_POSITION_FLEX_MAP = {\r\n            left: 'flex-start',\r\n            center: 'center',\r\n            right: 'flex-end',\r\n        };\r\n        this.Y_POSITION_FLEX_MAP = {\r\n            top: 'flex-start',\r\n            center: 'center',\r\n            bottom: 'flex-end',\r\n        };\r\n        // Creates the main notifications container\r\n        var docFrag = document.createDocumentFragment();\r\n        var notyfContainer = this._createHTLMElement({ tagName: 'div', className: 'notyf' });\r\n        docFrag.appendChild(notyfContainer);\r\n        document.body.appendChild(docFrag);\r\n        this.container = notyfContainer;\r\n        // Identifies the main animation end event\r\n        this.animationEndEventName = this._getAnimationEndEventName();\r\n        this._createA11yContainer();\r\n    }\r\n    NotyfView.prototype.on = function (event, cb) {\r\n        var _a;\r\n        this.events = __assign(__assign({}, this.events), (_a = {}, _a[event] = cb, _a));\r\n    };\r\n    NotyfView.prototype.update = function (notification, type) {\r\n        if (type === NotyfArrayEvent.Add) {\r\n            this.addNotification(notification);\r\n        }\r\n        else if (type === NotyfArrayEvent.Remove) {\r\n            this.removeNotification(notification);\r\n        }\r\n    };\r\n    NotyfView.prototype.removeNotification = function (notification) {\r\n        var _this = this;\r\n        var renderedNotification = this._popRenderedNotification(notification);\r\n        var node;\r\n        if (!renderedNotification) {\r\n            return;\r\n        }\r\n        node = renderedNotification.node;\r\n        node.classList.add('notyf__toast--disappear');\r\n        var handleEvent;\r\n        node.addEventListener(this.animationEndEventName, (handleEvent = function (event) {\r\n            if (event.target === node) {\r\n                node.removeEventListener(_this.animationEndEventName, handleEvent);\r\n                _this.container.removeChild(node);\r\n            }\r\n        }));\r\n    };\r\n    NotyfView.prototype.addNotification = function (notification) {\r\n        var node = this._renderNotification(notification);\r\n        this.notifications.push({ notification: notification, node: node });\r\n        // For a11y purposes, we still want to announce that there's a notification in the screen\r\n        // even if it comes with no message.\r\n        this._announce(notification.options.message || 'Notification');\r\n    };\r\n    NotyfView.prototype._renderNotification = function (notification) {\r\n        var _a;\r\n        var card = this._buildNotificationCard(notification);\r\n        var className = notification.options.className;\r\n        if (className) {\r\n            (_a = card.classList).add.apply(_a, className.split(' '));\r\n        }\r\n        this.container.appendChild(card);\r\n        return card;\r\n    };\r\n    NotyfView.prototype._popRenderedNotification = function (notification) {\r\n        var idx = -1;\r\n        for (var i = 0; i < this.notifications.length && idx < 0; i++) {\r\n            if (this.notifications[i].notification === notification) {\r\n                idx = i;\r\n            }\r\n        }\r\n        if (idx !== -1) {\r\n            return this.notifications.splice(idx, 1)[0];\r\n        }\r\n        return;\r\n    };\r\n    NotyfView.prototype.getXPosition = function (options) {\r\n        var _a;\r\n        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.x) || 'right';\r\n    };\r\n    NotyfView.prototype.getYPosition = function (options) {\r\n        var _a;\r\n        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.y) || 'bottom';\r\n    };\r\n    NotyfView.prototype.adjustContainerAlignment = function (options) {\r\n        var align = this.X_POSITION_FLEX_MAP[this.getXPosition(options)];\r\n        var justify = this.Y_POSITION_FLEX_MAP[this.getYPosition(options)];\r\n        var style = this.container.style;\r\n        style.setProperty('justify-content', justify);\r\n        style.setProperty('align-items', align);\r\n    };\r\n    NotyfView.prototype._buildNotificationCard = function (notification) {\r\n        var _this = this;\r\n        var _a;\r\n        var options = notification.options;\r\n        var iconOpts = options.icon;\r\n        // Adjust container according to position (e.g. top-left, bottom-center, etc)\r\n        this.adjustContainerAlignment(options);\r\n        // Create elements\r\n        var notificationElem = this._createHTLMElement({ tagName: 'div', className: 'notyf__toast' });\r\n        var ripple = this._createHTLMElement({ tagName: 'div', className: 'notyf__ripple' });\r\n        var wrapper = this._createHTLMElement({ tagName: 'div', className: 'notyf__wrapper' });\r\n        var message = this._createHTLMElement({ tagName: 'div', className: 'notyf__message' });\r\n        message.innerHTML = options.message || '';\r\n        var color = options.background || options.backgroundColor;\r\n        // Build the icon and append it to the card\r\n        if (iconOpts && typeof iconOpts === 'object') {\r\n            var iconContainer = this._createHTLMElement({ tagName: 'div', className: 'notyf__icon' });\r\n            var icon = this._createHTLMElement({\r\n                tagName: iconOpts.tagName || 'i',\r\n                className: iconOpts.className,\r\n                text: iconOpts.text,\r\n            });\r\n            var iconColor = (_a = iconOpts.color) !== null && _a !== void 0 ? _a : color;\r\n            if (iconColor) {\r\n                icon.style.color = iconColor;\r\n            }\r\n            iconContainer.appendChild(icon);\r\n            wrapper.appendChild(iconContainer);\r\n        }\r\n        wrapper.appendChild(message);\r\n        notificationElem.appendChild(wrapper);\r\n        // Add ripple if applicable, else just paint the full toast\r\n        if (color) {\r\n            if (options.ripple) {\r\n                ripple.style.background = color;\r\n                notificationElem.appendChild(ripple);\r\n            }\r\n            else {\r\n                notificationElem.style.background = color;\r\n            }\r\n        }\r\n        // Add dismiss button\r\n        if (options.dismissible) {\r\n            var dismissWrapper = this._createHTLMElement({ tagName: 'div', className: 'notyf__dismiss' });\r\n            var dismissButton = this._createHTLMElement({\r\n                tagName: 'button',\r\n                className: 'notyf__dismiss-btn',\r\n            });\r\n            dismissWrapper.appendChild(dismissButton);\r\n            wrapper.appendChild(dismissWrapper);\r\n            notificationElem.classList.add(\"notyf__toast--dismissible\");\r\n            dismissButton.addEventListener('click', function (event) {\r\n                var _a, _b;\r\n                (_b = (_a = _this.events)[NotyfEvent.Dismiss]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event });\r\n                event.stopPropagation();\r\n            });\r\n        }\r\n        notificationElem.addEventListener('click', function (event) { var _a, _b; return (_b = (_a = _this.events)[NotyfEvent.Click]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event }); });\r\n        // Adjust margins depending on whether its an upper or lower notification\r\n        var className = this.getYPosition(options) === 'top' ? 'upper' : 'lower';\r\n        notificationElem.classList.add(\"notyf__toast--\" + className);\r\n        return notificationElem;\r\n    };\r\n    NotyfView.prototype._createHTLMElement = function (_a) {\r\n        var tagName = _a.tagName, className = _a.className, text = _a.text;\r\n        var elem = document.createElement(tagName);\r\n        if (className) {\r\n            elem.className = className;\r\n        }\r\n        elem.textContent = text || null;\r\n        return elem;\r\n    };\r\n    /**\r\n     * Creates an invisible container which will announce the notyfs to\r\n     * screen readers\r\n     */\r\n    NotyfView.prototype._createA11yContainer = function () {\r\n        var a11yContainer = this._createHTLMElement({ tagName: 'div', className: 'notyf-announcer' });\r\n        a11yContainer.setAttribute('aria-atomic', 'true');\r\n        a11yContainer.setAttribute('aria-live', 'polite');\r\n        // Set the a11y container to be visible hidden. Can't use display: none as\r\n        // screen readers won't read it.\r\n        a11yContainer.style.border = '0';\r\n        a11yContainer.style.clip = 'rect(0 0 0 0)';\r\n        a11yContainer.style.height = '1px';\r\n        a11yContainer.style.margin = '-1px';\r\n        a11yContainer.style.overflow = 'hidden';\r\n        a11yContainer.style.padding = '0';\r\n        a11yContainer.style.position = 'absolute';\r\n        a11yContainer.style.width = '1px';\r\n        a11yContainer.style.outline = '0';\r\n        document.body.appendChild(a11yContainer);\r\n        this.a11yContainer = a11yContainer;\r\n    };\r\n    /**\r\n     * Announces a message to screenreaders.\r\n     */\r\n    NotyfView.prototype._announce = function (message) {\r\n        var _this = this;\r\n        this.a11yContainer.textContent = '';\r\n        // This 100ms timeout is necessary for some browser + screen-reader combinations:\r\n        // - Both JAWS and NVDA over IE11 will not announce anything without a non-zero timeout.\r\n        // - With Chrome and IE11 with NVDA or JAWS, a repeated (identical) message won't be read a\r\n        //   second time without clearing and then using a non-zero delay.\r\n        // (using JAWS 17 at time of this writing).\r\n        // https://github.com/angular/material2/blob/master/src/cdk/a11y/live-announcer/live-announcer.ts\r\n        setTimeout(function () {\r\n            _this.a11yContainer.textContent = message;\r\n        }, 100);\r\n    };\r\n    /**\r\n     * Determine which animationend event is supported\r\n     */\r\n    NotyfView.prototype._getAnimationEndEventName = function () {\r\n        var el = document.createElement('_fake');\r\n        var transitions = {\r\n            MozTransition: 'animationend',\r\n            OTransition: 'oAnimationEnd',\r\n            WebkitTransition: 'webkitAnimationEnd',\r\n            transition: 'animationend',\r\n        };\r\n        var t;\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined) {\r\n                return transitions[t];\r\n            }\r\n        }\r\n        // No supported animation end event. Using \"animationend\" as a fallback\r\n        return 'animationend';\r\n    };\r\n    return NotyfView;\r\n}());\n\n/**\r\n * Main controller class. Defines the main Notyf API.\r\n */\r\nvar Notyf = /** @class */ (function () {\r\n    function Notyf(opts) {\r\n        var _this = this;\r\n        this.dismiss = this._removeNotification;\r\n        this.notifications = new NotyfArray();\r\n        this.view = new NotyfView();\r\n        var types = this.registerTypes(opts);\r\n        this.options = __assign(__assign({}, DEFAULT_OPTIONS), opts);\r\n        this.options.types = types;\r\n        this.notifications.onUpdate(function (elem, type) { return _this.view.update(elem, type); });\r\n        this.view.on(NotyfEvent.Dismiss, function (_a) {\r\n            var target = _a.target, event = _a.event;\r\n            _this._removeNotification(target);\r\n            // tslint:disable-next-line: no-string-literal\r\n            target['triggerEvent'](NotyfEvent.Dismiss, event);\r\n        });\r\n        // tslint:disable-next-line: no-string-literal\r\n        this.view.on(NotyfEvent.Click, function (_a) {\r\n            var target = _a.target, event = _a.event;\r\n            return target['triggerEvent'](NotyfEvent.Click, event);\r\n        });\r\n    }\r\n    Notyf.prototype.error = function (payload) {\r\n        var options = this.normalizeOptions('error', payload);\r\n        return this.open(options);\r\n    };\r\n    Notyf.prototype.success = function (payload) {\r\n        var options = this.normalizeOptions('success', payload);\r\n        return this.open(options);\r\n    };\r\n    Notyf.prototype.open = function (options) {\r\n        var defaultOpts = this.options.types.find(function (_a) {\r\n            var type = _a.type;\r\n            return type === options.type;\r\n        }) || {};\r\n        var config = __assign(__assign({}, defaultOpts), options);\r\n        this.assignProps(['ripple', 'position', 'dismissible'], config);\r\n        var notification = new NotyfNotification(config);\r\n        this._pushNotification(notification);\r\n        return notification;\r\n    };\r\n    Notyf.prototype.dismissAll = function () {\r\n        while (this.notifications.splice(0, 1))\r\n            ;\r\n    };\r\n    /**\r\n     * Assigns properties to a config object based on two rules:\r\n     * 1. If the config object already sets that prop, leave it as so\r\n     * 2. Otherwise, use the default prop from the global options\r\n     *\r\n     * It's intended to build the final config object to open a notification. e.g. if\r\n     * 'dismissible' is not set, then use the value from the global config.\r\n     *\r\n     * @param props - properties to be assigned to the config object\r\n     * @param config - object whose properties need to be set\r\n     */\r\n    Notyf.prototype.assignProps = function (props, config) {\r\n        var _this = this;\r\n        props.forEach(function (prop) {\r\n            // intentional double equality to check for both null and undefined\r\n            config[prop] = config[prop] == null ? _this.options[prop] : config[prop];\r\n        });\r\n    };\r\n    Notyf.prototype._pushNotification = function (notification) {\r\n        var _this = this;\r\n        this.notifications.push(notification);\r\n        var duration = notification.options.duration !== undefined ? notification.options.duration : this.options.duration;\r\n        if (duration) {\r\n            setTimeout(function () { return _this._removeNotification(notification); }, duration);\r\n        }\r\n    };\r\n    Notyf.prototype._removeNotification = function (notification) {\r\n        var index = this.notifications.indexOf(notification);\r\n        if (index !== -1) {\r\n            this.notifications.splice(index, 1);\r\n        }\r\n    };\r\n    Notyf.prototype.normalizeOptions = function (type, payload) {\r\n        var options = { type: type };\r\n        if (typeof payload === 'string') {\r\n            options.message = payload;\r\n        }\r\n        else if (typeof payload === 'object') {\r\n            options = __assign(__assign({}, options), payload);\r\n        }\r\n        return options;\r\n    };\r\n    Notyf.prototype.registerTypes = function (opts) {\r\n        var incomingTypes = ((opts && opts.types) || []).slice();\r\n        var finalDefaultTypes = DEFAULT_OPTIONS.types.map(function (defaultType) {\r\n            // find if there's a default type within the user input's types, if so, it means the user\r\n            // wants to change some of the default settings\r\n            var userTypeIdx = -1;\r\n            incomingTypes.forEach(function (t, idx) {\r\n                if (t.type === defaultType.type)\r\n                    userTypeIdx = idx;\r\n            });\r\n            var userType = userTypeIdx !== -1 ? incomingTypes.splice(userTypeIdx, 1)[0] : {};\r\n            return __assign(__assign({}, defaultType), userType);\r\n        });\r\n        return finalDefaultTypes.concat(incomingTypes);\r\n    };\r\n    return Notyf;\r\n}());\n\nexport { DEFAULT_OPTIONS, Notyf, NotyfArray, NotyfArrayEvent, NotyfEvent, NotyfNotification, NotyfView };\n","import { Notyf } from 'notyf';\nlet notyf = new Notyf({\n  duration: 5000,\n  position: {\n    x: \"center\",\n    y: \"top\"\n  },\n  dismissible: true\n});\n\nexport function showSuccessMessage (msg) {\n  notyf.success(msg);\n}\n\nexport function showErrorMessage (msg) {\n  notyf.error(msg)\n}\n","import temporaryGlobals from \"../../temporary-globals/temporary-globals\";\nimport {persistentGlobals} from \"../../persistent-globals/persistent-globals\";\n\nexport default function closeBottomBar () {\n  // store date it was clsoed\n  persistentGlobals.bottomBarClosedDate = Date.now();\n\n  temporaryGlobals.BOTTOM_BAR_ELEM.classList.remove(\"show\");\n  document.body.classList.remove(temporaryGlobals.BODY_CLASS_BOTTOM_BAR_OPEN);\n}","function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// Older browsers don't support event options, feature detect it.\n\n// Adopted and modified solution from Bohdan Didukh (2017)\n// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi\n\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\n\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\n\n\nvar locks = [];\nvar documentListenerAdded = false;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting = void 0;\nvar previousBodyPaddingRight = void 0;\n\n// returns true if `el` should be allowed to receive touchmove events.\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function (lock) {\n    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {\n      return true;\n    }\n\n    return false;\n  });\n};\n\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true;\n\n  if (e.preventDefault) e.preventDefault();\n\n  return false;\n};\n\nvar setOverflowHidden = function setOverflowHidden(options) {\n  // Setting overflow on body/documentElement synchronously in Desktop Safari slows down\n  // the responsiveness for some reason. Setting within a setTimeout fixes this.\n  setTimeout(function () {\n    // If previousBodyPaddingRight is already set, don't set it again.\n    if (previousBodyPaddingRight === undefined) {\n      var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n      var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n\n      if (_reserveScrollBarGap && scrollBarGap > 0) {\n        previousBodyPaddingRight = document.body.style.paddingRight;\n        document.body.style.paddingRight = scrollBarGap + 'px';\n      }\n    }\n\n    // If previousBodyOverflowSetting is already set, don't set it again.\n    if (previousBodyOverflowSetting === undefined) {\n      previousBodyOverflowSetting = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n    }\n  });\n};\n\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  // Setting overflow on body/documentElement synchronously in Desktop Safari slows down\n  // the responsiveness for some reason. Setting within a setTimeout fixes this.\n  setTimeout(function () {\n    if (previousBodyPaddingRight !== undefined) {\n      document.body.style.paddingRight = previousBodyPaddingRight;\n\n      // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n      // can be set again.\n      previousBodyPaddingRight = undefined;\n    }\n\n    if (previousBodyOverflowSetting !== undefined) {\n      document.body.style.overflow = previousBodyOverflowSetting;\n\n      // Restore previousBodyOverflowSetting to undefined\n      // so setOverflowHidden knows it can be set again.\n      previousBodyOverflowSetting = undefined;\n    }\n  });\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\n\nvar handleScroll = function handleScroll(event, targetElement) {\n  var clientY = event.targetTouches[0].clientY - initialClientY;\n\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event);\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event);\n  }\n\n  event.stopPropagation();\n  return true;\n};\n\nexport var disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  if (isIosDevice) {\n    // targetElement must be provided, and disableBodyScroll must not have been\n    // called on this targetElement before.\n    if (!targetElement) {\n      // eslint-disable-next-line no-console\n      console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n      return;\n    }\n\n    if (targetElement && !locks.some(function (lock) {\n      return lock.targetElement === targetElement;\n    })) {\n      var lock = {\n        targetElement: targetElement,\n        options: options || {}\n      };\n\n      locks = [].concat(_toConsumableArray(locks), [lock]);\n\n      targetElement.ontouchstart = function (event) {\n        if (event.targetTouches.length === 1) {\n          // detect single touch.\n          initialClientY = event.targetTouches[0].clientY;\n        }\n      };\n      targetElement.ontouchmove = function (event) {\n        if (event.targetTouches.length === 1) {\n          // detect single touch.\n          handleScroll(event, targetElement);\n        }\n      };\n\n      if (!documentListenerAdded) {\n        document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n        documentListenerAdded = true;\n      }\n    }\n  } else {\n    setOverflowHidden(options);\n    var _lock = {\n      targetElement: targetElement,\n      options: options || {}\n    };\n\n    locks = [].concat(_toConsumableArray(locks), [_lock]);\n  }\n};\n\nexport var clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {\n  if (isIosDevice) {\n    // Clear all locks ontouchstart/ontouchmove handlers, and the references.\n    locks.forEach(function (lock) {\n      lock.targetElement.ontouchstart = null;\n      lock.targetElement.ontouchmove = null;\n    });\n\n    if (documentListenerAdded) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n\n    locks = [];\n\n    // Reset initial clientY.\n    initialClientY = -1;\n  } else {\n    restoreOverflowSetting();\n    locks = [];\n  }\n};\n\nexport var enableBodyScroll = function enableBodyScroll(targetElement) {\n  if (isIosDevice) {\n    if (!targetElement) {\n      // eslint-disable-next-line no-console\n      console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');\n      return;\n    }\n\n    targetElement.ontouchstart = null;\n    targetElement.ontouchmove = null;\n\n    locks = locks.filter(function (lock) {\n      return lock.targetElement !== targetElement;\n    });\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n\n      documentListenerAdded = false;\n    }\n  } else {\n    locks = locks.filter(function (lock) {\n      return lock.targetElement !== targetElement;\n    });\n    if (!locks.length) {\n      restoreOverflowSetting();\n    }\n  }\n};\n\n","import { enableBodyScroll } from 'body-scroll-lock';\nimport temporaryGlobals from \"../../temporary-globals/temporary-globals\";\nimport {persistentGlobals} from \"../../persistent-globals/persistent-globals\";\nimport {whenTriggerDataChanges} from \"../../trigger-popups/watch-trigger-data\";\n\nexport default function closeModal() {\n  // store date it was clsoed\n  persistentGlobals.modalClosedDate = Date.now();\n\n  // hide the modal\n  temporaryGlobals.MODAL_ELEM.classList.remove(\"show\");\n  // remove body class\n  document.body.classList.remove(temporaryGlobals.BODY_CLASS_MODAL_OPEN);\n\n  // Untrap the tab focus by removing tabindex=-1. You should restore previous values if an element had them.    \n  const focusableElements = document.querySelectorAll(temporaryGlobals.FOCUSABLE_SELECTORS);\n  focusableElements.forEach(el => el.removeAttribute('tabindex'));\n  \n  // Untrap screen reader focus\n  const topLevelElements = document.querySelectorAll(\"body > [aria-hidden]\");\n  topLevelElements.forEach(el => el.removeAttribute('aria-hidden'));\n  temporaryGlobals.MODAL_ELEM.setAttribute('aria-hidden', 'true');\n  \n  // restore focus to the triggering element\n  if (temporaryGlobals.activeElement) {\n    temporaryGlobals.activeElement.focus();\n  }\n\n  enableBodyScroll(temporaryGlobals.MODAL_ELEM);\n\n  temporaryGlobals.isModalOpen = false;\n  // manually recompute `isModalOpenable` because temporary globals don't trigger this automatically\n  whenTriggerDataChanges();\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport {sendEmailToMailChimp} from \"../integrations/mailchimp\";\nimport closeBottomBar from \"../bottom-bar/bottom-bar-actions/close-bottom-bar\";\nimport closeModal from \"../modal/modal-actions/close-modal\";\nimport {showSuccessMessage, showErrorMessage} from \"../helpers/notifications\";\n\nexport function onSubmit (event) {\n  event.preventDefault();\n\n  if (event.currentTarget.closest(\".bottom-bar\")) {\n    closeBottomBar();\n  } else if (event.currentTarget.closest(\".email-modal\")) {\n    closeModal();\n  }\n\n  // SPAM PREVENTION\n  if (event.currentTarget.querySelector('.js-validate-not-robot').value !== '') {\n    return;\n  }\n\n  let emailInputElement = event.currentTarget.querySelector(temporaryGlobals.SELECTORS.BOTTOM_BAR_FORM_INPUT_ELEM_SELECTOR);\n  let email = emailInputElement.value;\n\n  // MAILCHIMP integration\n  let {spamPreventionKey, formAction} = temporaryGlobals.mailchimpConfig;\n  if (spamPreventionKey && formAction) {\n    sendEmailToMailChimp({event, email, spamPreventionKey, formAction});\n  } else {\n    if (temporaryGlobals.showFormSubmissionNotices) {\n      showSuccessMessage();\n    }\n    temporaryGlobals.onSubmit({event, email});\n  }\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport {showSuccessMessage, showErrorMessage} from \"../helpers/notifications\";\n\nexport function sendEmailToMailChimp ({event, email, spamPreventionKey, formAction, userDefinedCallback}) {\n  // Get url for mailchimp\n  let url = (formAction || \"\").replace('/post?', '/post-json?');\n\n  // Add form data to object\n  let data = '';\n  let inputs = event.currentTarget.querySelectorAll('input');\n  for (let i = 0; i < inputs.length; i++) {\n    data += '&' + inputs[i].name + '=' + encodeURIComponent(inputs[i].value);\n  }\n\n  // Add Mailchimps spam prevention key to data\n  data += '&' + spamPreventionKey + '=' + \"\";\n\n  // Create & add post script to the DOM\n  let script = document.createElement('script');\n  script.src = url + data + \"&c=mailchimpCallback\";\n  document.body.appendChild(script);\n\n  // Callback function\n  let callback = 'mailchimpCallback';\n  window[callback] = function(res) {\n\n    // Remove post script from the DOM\n    delete window[callback];\n    document.body.removeChild(script);\n\n    // Display notices\n    if (temporaryGlobals.showFormSubmissionNotices) {\n      if (res.result === \"success\") {\n        showSuccessMessage(temporaryGlobals.successMessage);\n      } else {\n        showErrorMessage(temporaryGlobals.failureMessage);\n      } \n    }\n\n    // Call user defined onSubmit callback\n    if (res.result === \"success\") {\n      temporaryGlobals.onSubmit({event, email, success: true});\n    } else {\n      temporaryGlobals.onSubmit({event, email, success: false});\n    }\n\n  };\n}\n","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport {onSubmit} from \"../event-handlers/on-submit\";\nimport initExitIntent from \"./init-exit-intent\";\nimport closeModal from \"./modal-actions/close-modal\";\n\nexport default function initModalEventListeners () {\n  // when user goes to exit the page, if politeness rules are met, show modal\n  initExitIntent();\n  // when backdrop clicked, close modal\n  temporaryGlobals.MODAL_ELEM.addEventListener(\"click\", onClickModalBackdrop);\n  // when email form submitted, call onSubmit callback and close modal\n  temporaryGlobals.MODAL_FORM_ELEM.addEventListener(\"submit\", onSubmit);\n  // when modal close button clicked, close modal\n  temporaryGlobals.MODAL_CLOSE_BUTTON_ELEM.addEventListener('click', closeModal);\n  // when Esc key is pressed, close modal\n  document.addEventListener(\"keydown\", onKeyDown);\n}\n\nfunction onKeyDown (event) {\n  if (event.keyCode === 27 && document.body.classList.contains(temporaryGlobals.BODY_CLASS_MODAL_OPEN)) {\n    closeModal();\n  }\n}\n\nfunction onClickModalBackdrop (event) {\n  if (!event.target.closest(temporaryGlobals.SELECTORS.MODAL_FORM_ELEM_SELECTOR)) {\n    closeModal();\n  }\n}\n\n\n\n","import domReady from \"./dom/dom-ready\";\n\nimport {watchTriggerData} from \"./trigger-popups/watch-trigger-data\";\nimport initTemporaryGlobals from \"./temporary-globals/init-temporary-globals\";\nimport initPersistentGlobals from \"./persistent-globals/init-persistent-globals\";\nimport initDomElements from \"./dom/init-dom-elements\";\n\nimport initDebugNoticeEventListeners from \"./debug-notice/init-debug-notice-event-listeners\";\nimport initModalEventListeners from \"./modal/init-modal-event-listeners\";\nimport initBottomBarEventListeners from \"./bottom-bar/init-bottom-bar-event-listeners\";\n\nexport default function initEmailForms (options) {\n  domReady(() => {\n\n    // set up all global options and elements we'll need\n    initTemporaryGlobals(options);\n\n    // add debug notice, modal, and bottom bar to the page \n    // (relies on selectors in temporary globals being defined)\n    initDomElements();\n\n    // trigger the popups when data is right \n    // (relies on DOM elements being present)\n    watchTriggerData();\n\n    // set up global options that need to persist through page loads (e.g. page views, scroll percentage, active time on site)\n    // (should be called after trigger data watchers, so they'll trigger immediately on page load)\n    initPersistentGlobals();\n\n    // set up event listeners for debug notice\n    initDebugNoticeEventListeners();\n\n    // set up event listeners for email popup\n    initModalEventListeners();\n\n    // set up event listeners for email popup\n    initBottomBarEventListeners();\n\n  });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","export default function domReady(fn) {\n  if (document.readyState != 'loading'){\n    fn();\n  } else {\n    document.addEventListener('DOMContentLoaded', fn);\n  }\n}","/*\n  Exit Intent\n  ===========\n  Triggers a callback whenever the user is about to leave the page\n\n  - Isn't aggressive\n    - Will only trigger once\n    - Will only trigger when the mouse is near top of page\n  - Addresses Firefox bugs with INPUT and SELECT elements\n*/\n\nexport default function onExitIntent (exitIntentCallback) {\n  function onMouseOut(event) {\n    let mouseNearTopOfPage = event.clientY < 20;\n    let mouseDidntEnterAnotherElement = event.relatedTarget === null;\n    let mouseEventIsNotInsideAnInputElement = event.target.nodeName.toLowerCase() !== \"select\" && event.target.nodeName.toLowerCase() !== \"input\"; \n\n    if (mouseNearTopOfPage && mouseDidntEnterAnotherElement && mouseEventIsNotInsideAnInputElement) {\n      // document.removeEventListener(\"mouseout\", onMouseOut);\n      if (exitIntentCallback) {\n        exitIntentCallback();\n      }\n    }\n  }\n  document.addEventListener(\"mouseout\", onMouseOut);\n}","import temporaryGlobals from \"./temporary-globals\";\nimport getElem from \"../dom/get-elem\";\n\nexport default function initTemporaryGlobals (userDefinedGlobals) {\n  const SELECTORS = {\n    MODAL_ELEM_SELECTOR: \".email-modal\",\n    MODAL_FORM_ELEM_SELECTOR: \".email-modal__content\",\n    MODAL_FORM_INPUT_ELEM_SELECTOR: \".email-signup-form-input\",\n    MODAL_CLOSE_BUTTON_ELEM_SELECTOR: \".email-modal__close\",\n    BOTTOM_BAR_ELEM_SELECTOR: \".bottom-bar\",\n    BOTTOM_BAR_FORM_INPUT_ELEM_SELECTOR: \".email-signup-form-input\",\n    BOTTOM_BAR_FORM_ELEM_SELECTOR: \"form.bottom-bar__content\",\n    BOTTOM_BAR_CLOSE_BUTTON_ELEM_SELECTOR: \".bottom-bar__close\",\n    DEBUG_ELEM: \".polite-email-popup__debug-notice\",\n    DEBUG_ELEM_RESET_SELECTOR: \".debug-email-forms__reset\",\n    DEBUG_ELEM_BYPASS_SELECTOR: \".debug-email-forms__bypass\"\n  };\n\n  const defaultGlobals = {\n    \n    // USER DEFAULTS\n    showDebugNotice: false,\n    websiteType: \"content\", // \"content\" or \"marketing\"\n    beSlightlyMoreAggressive: false,\n    onSubmit: () => {},\n    imageSrc: \"\",\n    headingText: \"Sign up for updates\",\n    descriptionText: \"Get cutting edge articles and insights into our process\",\n    mainButtonText: \"Sign up\",\n    closeButtonText: \"Close\",\n    showFormSubmissionNotices: true,\n    successMessage: \"Thank you signing up!\",\n    failureMessage: \"Sorry, sign up failed...\",\n    mailchimpConfig: {},\n\n    // SYSTEM GLOBALS\n    SELECTORS: SELECTORS,\n    IS_MOBILE: window.matchMedia(\"only screen and (max-width: 780px)\").matches,\n    FOCUSABLE_SELECTORS: 'a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]',\n    BODY_CLASS_MODAL_OPEN: 'email-modal-is-open',\n    BODY_CLASS_BOTTOM_BAR_OPEN: 'email-bottom-bar-is-open',\n\n    // SYSTEM FLAGS\n    isModalOpenable: false,\n    isModalOpen: false\n  };\n\n  Object.assign(temporaryGlobals, defaultGlobals, userDefinedGlobals);\n\n  // todo remove\n  window.temporaryGlobals = temporaryGlobals;\n}\n\n\n","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport addHtmlToPage from \"./add-html-to-page\";\nimport getModalTemplateString from \"../modal/get-modal-template-string\";\nimport getBottomBarTemplateString from \"../bottom-bar/get-bottom-bar-template-string\";\nimport initElemGlobals from \"./init-elem-globals\";\nimport getStylesString from \"../helpers/get-styles-string\";\n\nexport default function initDomElements () {\n  addHtmlToPage(getStylesString());\n\n  if (temporaryGlobals.showDebugNotice) {\n    addHtmlToPage(\"<div class='polite-email-popup__debug-notice'></div>\");\n  }\n\n  // Add modal to page\n  addHtmlToPage(getModalTemplateString(temporaryGlobals));\n\n  // Add bottom bar to page\n  addHtmlToPage(getBottomBarTemplateString(temporaryGlobals));\n\n  // Add elements to temporary globals\n  initElemGlobals();\n}","export default function getStylesString () {\n  return `<style>@-webkit-keyframes notyf-fadeinup{0%{opacity:0;transform:translateY(25%)}to{opacity:1;transform:translateY(0)}}@keyframes notyf-fadeinup{0%{opacity:0;transform:translateY(25%)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes notyf-fadeinleft{0%{opacity:0;transform:translateX(25%)}to{opacity:1;transform:translateX(0)}}@keyframes notyf-fadeinleft{0%{opacity:0;transform:translateX(25%)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes notyf-fadeoutright{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(25%)}}@keyframes notyf-fadeoutright{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(25%)}}@-webkit-keyframes notyf-fadeoutdown{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(25%)}}@keyframes notyf-fadeoutdown{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(25%)}}@-webkit-keyframes ripple{0%{transform:scale(0) translateY(-45%) translateX(13%)}to{transform:scale(1) translateY(-45%) translateX(13%)}}@keyframes ripple{0%{transform:scale(0) translateY(-45%) translateX(13%)}to{transform:scale(1) translateY(-45%) translateX(13%)}}.notyf{position:fixed;top:0;left:0;height:100%;width:100%;color:#fff;z-index:9999;display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;pointer-events:none;box-sizing:border-box;padding:20px;font-size:16px}.notyf__icon--error,.notyf__icon--success{height:21px;width:21px;background:#fff;border-radius:50%;display:block;margin:0 auto;position:relative}.notyf__icon--error:after,.notyf__icon--error:before{content:\"\";background:currentColor;display:block;position:absolute;width:3px;border-radius:3px;left:9px;height:12px;top:5px}.notyf__icon--error:after{transform:rotate(-45deg)}.notyf__icon--error:before{transform:rotate(45deg)}.notyf__icon--success:after,.notyf__icon--success:before{content:\"\";background:currentColor;display:block;position:absolute;width:3px;border-radius:3px}.notyf__icon--success:after{height:6px;transform:rotate(-45deg);top:9px;left:6px}.notyf__icon--success:before{height:11px;transform:rotate(45deg);top:5px;left:10px}.notyf__toast{display:block;overflow:hidden;pointer-events:auto;-webkit-animation:notyf-fadeinup .3s ease-in forwards;animation:notyf-fadeinup .3s ease-in forwards;box-shadow:0 3px 7px 0 rgba(0,0,0,.25);position:relative;padding:0 15px;border-radius:2px;max-width:300px;transform:translateY(25%);box-sizing:border-box;flex-shrink:0}.notyf__toast--disappear{transform:translateY(0);-webkit-animation:notyf-fadeoutdown .3s forwards;animation:notyf-fadeoutdown .3s forwards;-webkit-animation-delay:.25s;animation-delay:.25s}.notyf__toast--disappear .notyf__icon,.notyf__toast--disappear .notyf__message{-webkit-animation:notyf-fadeoutdown .3s forwards;animation:notyf-fadeoutdown .3s forwards;opacity:1;transform:translateY(0)}.notyf__toast--disappear .notyf__dismiss{-webkit-animation:notyf-fadeoutright .3s forwards;animation:notyf-fadeoutright .3s forwards;opacity:1;transform:translateX(0)}.notyf__toast--disappear .notyf__message{-webkit-animation-delay:50ms;animation-delay:50ms}.notyf__toast--upper{margin-bottom:20px}.notyf__toast--lower{margin-top:20px}.notyf__toast--dismissible .notyf__wrapper{padding-right:30px}.notyf__ripple{height:400px;width:400px;position:absolute;transform-origin:bottom right;right:0;top:0;border-radius:50%;transform:scale(0) translateY(-51%) translateX(13%);z-index:5;-webkit-animation:ripple .4s ease-out forwards;animation:ripple .4s ease-out forwards}.notyf__wrapper{display:flex;align-items:center;padding-top:17px;padding-bottom:17px;padding-right:15px;border-radius:3px;position:relative;z-index:10}.notyf__icon{width:22px;text-align:center;font-size:1.3em;opacity:0;-webkit-animation:notyf-fadeinup .3s forwards;animation:notyf-fadeinup .3s forwards;-webkit-animation-delay:.3s;animation-delay:.3s;margin-right:13px}.notyf__dismiss{position:absolute;top:0;right:0;height:100%;width:26px;margin-right:-15px;-webkit-animation:notyf-fadeinleft .3s forwards;animation:notyf-fadeinleft .3s forwards;-webkit-animation-delay:.35s;animation-delay:.35s;opacity:0}.notyf__dismiss-btn{background-color:rgba(0,0,0,.25);border:none;cursor:pointer;transition:opacity .2s ease,background-color .2s ease;outline:0;opacity:.35;height:100%;width:100%}.notyf__dismiss-btn:after,.notyf__dismiss-btn:before{content:\"\";background:#fff;height:12px;width:2px;border-radius:3px;position:absolute;left:calc(50% - 1px);top:calc(50% - 5px)}.notyf__dismiss-btn:after{transform:rotate(-45deg)}.notyf__dismiss-btn:before{transform:rotate(45deg)}.notyf__dismiss-btn:hover{opacity:.7;background-color:rgba(0,0,0,.15)}.notyf__dismiss-btn:active{opacity:.8}.notyf__message{vertical-align:middle;position:relative;opacity:0;-webkit-animation:notyf-fadeinup .3s forwards;animation:notyf-fadeinup .3s forwards;-webkit-animation-delay:.25s;animation-delay:.25s;line-height:1.5em}@media only screen and (max-width:480px){.notyf{padding:0}.notyf__ripple{height:600px;width:600px;-webkit-animation-duration:.5s;animation-duration:.5s}.notyf__toast{max-width:none;border-radius:0;box-shadow:0 -2px 7px 0 rgba(0,0,0,.13);width:100%}.notyf__dismiss{width:56px}}.bottom-bar,.email-modal{display:none;line-height:1.4;font-size:16px;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.bottom-bar.show,.email-modal.show{display:flex}.bottom-bar,.bottom-bar *,.email-modal,.email-modal *{box-sizing:border-box;margin:0;padding:0;color:#212529}.bottom-bar button,.email-modal button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:0 0;color:inherit;font:inherit;line-height:normal;cursor:pointer;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}.bottom-bar button::-moz-focus-inner,.email-modal button::-moz-focus-inner{border:0;padding:0}.bottom-bar .bottom-bar__close,.bottom-bar .bottom-bar__sign-up,.email-modal .email-modal__sign-up{padding:9px 22px 11px;font-size:17px;font-weight:700;letter-spacing:.5px;color:#fff;background-color:#4263eb;border-radius:1px}.bottom-bar .bottom-bar__sign-up:hover,.email-modal .email-modal__sign-up:hover{background-color:#364fc7}@media (min-width:780px){.bottom-bar .hide-desktop,.email-modal .hide-desktop{display:none!important}}@media (max-width:779.9999px){.bottom-bar .hide-mobile,.email-modal .hide-mobile{display:none!important}}.email-modal{z-index:100;flex-direction:column;align-items:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;line-height:1.4;font-size:16px;background-color:rgba(0,0,0,.6)}.email-modal .email-modal__content{transform:translate(0,1000px);transition:transform .4s;position:relative;width:480px;max-width:calc(100vw - 3rem);padding:35px 32px 33px 32px;background-color:#fff;border-radius:5px;box-shadow:0 2px 8px 0 rgba(0,0,0,.24)}.email-modal-is-open .email-modal .email-modal__content{transform:translate(0,0)}.email-modal .email-modal__top{display:flex;margin-bottom:1.75rem}.email-modal .email-modal__top-media{width:108px;margin-right:22px}.email-modal .email-modal__top-image{box-sizing:content-box;display:block;max-width:100%;border:1px solid #dee2e6;border-radius:5px}.email-modal .email-modal__title{font-size:22px;font-weight:700;margin-bottom:.25rem}.email-modal .email-modal__description{font-size:18px;color:#757575}.email-modal .email-modal__input-container{margin-bottom:1.75rem}.email-modal .email-modal__input{display:block;width:100%;padding:9px 15px 10px;border:1px solid #dee2e6;font-size:16px;font-family:inherit}.email-modal .email-modal__button-container{text-align:center}.email-modal .email-modal__close{position:absolute;top:14px;right:13px;width:33px;height:33px}.email-modal .email-modal__close:hover::after,.email-modal .email-modal__close:hover::before{background-color:#b1bac4}.email-modal .email-modal__close::before{transform:rotate(45deg);position:absolute;top:0;left:0;bottom:0;right:0;width:5px;height:33px;margin:auto;content:\"\";background-color:#ced4da;border-radius:2px}.email-modal .email-modal__close::after{transform:rotate(-45deg);position:absolute;top:0;left:0;bottom:0;right:0;width:5px;height:33px;margin:auto;content:\"\";background-color:#ced4da;border-radius:2px}@media (max-width:779.9999px){.email-modal .email-modal__top{display:block}.email-modal .email-modal__top-media{width:75px;margin:0 auto 1.75rem auto}.email-modal .email-modal__top-content{text-align:center}}.bottom-bar{z-index:99;position:fixed;left:0;bottom:0;justify-content:center;width:100%;border-top:1px solid #adb5bd;background-color:#f1f3f5}.bottom-bar .bottom-bar__content{display:flex;padding:10px 0 11px 0}.bottom-bar .bottom-bar__label{display:flex;align-items:center}.bottom-bar .bottom-bar__label-text{margin-top:-1px;margin-right:12px;font-weight:600;color:#343a40}.bottom-bar .bottom-bar__input{margin-right:11px;padding:6px 10px 7px;max-width:300px;width:31vw;border:1px solid #adb5bd;font-family:inherit;font-size:16px;border-radius:1px}.bottom-bar .bottom-bar__close,.bottom-bar .bottom-bar__sign-up{padding:7px 19px 9px;font-size:15px;font-weight:600;border-radius:999px}.bottom-bar .bottom-bar__close-container{position:absolute;top:0;right:0;padding:10px 16px 10px 0}.bottom-bar .bottom-bar__close{background-color:#ced4da;color:#495057}.bottom-bar .bottom-bar__close:hover{background-color:#adb5bd;color:#343a40}.bottom-bar .bottom-bar__close-x-icon{display:block;width:3px;height:20px;background-color:#868e96;transform:rotate(45deg)}.bottom-bar .bottom-bar__close-x-icon>span{display:block;width:3px;height:20px;background-color:#868e96;transform:rotate(-90deg)}@media (max-width:779.9999px){.bottom-bar.show{display:block}.bottom-bar .bottom-bar__content{align-items:flex-end;padding:15px 21px 21px 22px}.bottom-bar .bottom-bar__label{flex:1 0 auto;display:block}.bottom-bar .bottom-bar__label-text{display:block;margin:0 0 12px 0}.bottom-bar .bottom-bar__input{width:100%;max-width:calc(100% - 16px)}.bottom-bar .bottom-bar__close-container{padding:0;transform:translate(0,-100%)}.bottom-bar .bottom-bar__close{padding:7px 17px 7px;border-radius:2px 0 0 0}}.debug-email-forms{display:flex;flex-wrap:wrap;position:fixed;top:18px;right:24px;max-width:600px;padding:16px 21px;font-size:16px;line-height:1.4;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',sans-serif;color:#343a40;background-color:#fff;box-shadow:1px 3px 6px rgba(0,0,0,.25);border-radius:5px}.debug-email-forms .debug-email-forms__stat{width:50%;flex:1 0 auto;margin-bottom:12px}.debug-email-forms .debug-email-forms__stat--buttons{text-align:right}.debug-email-forms .debug-email-forms__reset{margin-right:8px}.debug-email-forms .debug-email-forms__stat-label{font-weight:700;color:#ae3ec9}.debug-email-forms .debug-email-forms__stat-value{white-space:nowrap;font-weight:700;color:#212529}.debug-email-forms .debug-email-forms__stat-requirements{margin:6px 0;padding-left:32px}.debug-email-forms .debug-email-forms__stat-requirement{color:#868e96}.debug-email-forms .debug-email-forms__stat-value--success{color:#2f9e44}.debug-email-forms .debug-email-forms__stat-value--fail{color:#e03131}</style>`;\n}","export default function getModalTemplateString ({imageSrc, headingText, descriptionText, mainButtonText}) {\n  return `\n<div class=\"email-modal\" role=\"dialog\" aria-labelledby=\"email-modal-title\" aria-describedby=\"email-modal-description\" aria-hidden=\"true\">\n  <form class=\"email-modal__content\" method=\"POST\" action=\"/\">\n    <div class=\"email-modal__top\">\n      ${imageSrc ? `<div class=\"email-modal__top-media\">\n        <img class=\"email-modal__top-image\" src=\"${imageSrc}\">\n      </div>` : \"\"}\n      <div class=\"email-modal__top-content\">\n        <h2 class=\"email-modal__title\" id=\"email-modal-title\">${headingText}</h2>\n        <p class=\"email-modal__description\" id=\"email-modal-description\">${descriptionText}</p>\n      </div>\n    </div>\n    <div class=\"email-modal__input-container\">\n      <input class=\"email-modal__input email-signup-form-input\" type=\"email\" name=\"EMAIL\" value=\"\" placeholder=\"Your email address\" required>\n      <div style=\"position: absolute; left: -5000px;\" aria-hidden=\"true\">\n        <input class=\"js-validate-not-robot\" type=\"text\" tabindex=\"-1\" value=\"\">\n      </div>\n    </div>\n    <div class=\"email-modal__button-container\">\n      <button class=\"email-modal__sign-up\" type=\"submit\">${mainButtonText}</button>\n    </div>\n    <button class=\"email-modal__close\" type=\"button\"></button>\n  </form>\n</div>\n`;\n}","export default function getBottomBarTemplateString ({headingText, mainButtonText, closeButtonText}) {\n  return `<div class=\"bottom-bar\" aria-hidden=\"true\">\n  <form class=\"bottom-bar__content\" method=\"POST\" action=\"/\">\n    <label class=\"bottom-bar__label\">\n      <span class=\"bottom-bar__label-text\">${headingText}</span>\n      <input class=\"bottom-bar__input email-signup-form-input\" type=\"email\" name=\"EMAIL\" value=\"\" placeholder=\"Your email address\" required>\n      <div style=\"position: absolute; left: -5000px;\" aria-hidden=\"true\">\n        <input class=\"js-validate-not-robot\" type=\"text\" tabindex=\"-1\" value=\"\">\n      </div>\n    </label>\n    <button class=\"bottom-bar__sign-up\" type=\"submit\">${mainButtonText}</button>\n  </form>\n  <div class=\"bottom-bar__close-container\">\n    <button class=\"bottom-bar__close\" type=\"button\">\n      <span class=\"hide-mobile\">${closeButtonText}</span>\n      <span class=\"bottom-bar__close-x-icon hide-desktop\"><span></span></span>\n    </button>\n  </div>\n</div>`;\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport getElem from \"./get-elem\";\n\nexport default function initElemGlobals () {\n  let {SELECTORS} = temporaryGlobals;\n\n  Object.assign(temporaryGlobals, {\n    MODAL_ELEM: getElem(SELECTORS.MODAL_ELEM_SELECTOR),\n    MODAL_FORM_ELEM: getElem(SELECTORS.MODAL_FORM_ELEM_SELECTOR),\n    MODAL_CLOSE_BUTTON_ELEM: getElem(SELECTORS.MODAL_CLOSE_BUTTON_ELEM_SELECTOR),\n    BOTTOM_BAR_ELEM: getElem(SELECTORS.BOTTOM_BAR_ELEM_SELECTOR),\n    BOTTOM_BAR_FORM_ELEM: getElem(SELECTORS.BOTTOM_BAR_FORM_ELEM_SELECTOR),\n    BOTTOM_BAR_CLOSE_BUTTON_ELEM: getElem(SELECTORS.BOTTOM_BAR_CLOSE_BUTTON_ELEM_SELECTOR),\n    DEBUG_NOTICE_ELEM: getElem(SELECTORS.DEBUG_ELEM)\n  });\n}","function n(n,t){var i=!0,o=!1;return function(){var c=arguments;o||(o=!0,setTimeout(function(){n.apply(void 0,[].slice.call(c)),o=!1},i?0:t),i=!1)}}function t(n,t){var i;return function(){var o=arguments;clearTimeout(i),i=setTimeout(function(){n.apply(void 0,[].slice.call(o))},t)}}export{t as debounce,n as throttle};\n//# sourceMappingURL=stormcloud.module.js.map\n","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport {persistentGlobals} from \"../persistent-globals/persistent-globals\";\n\nexport default function initDebugNoticeEventListeners () {\n  if (temporaryGlobals.showDebugNotice) {\n    document.addEventListener(\"click\", event => {\n\n      if (event.target.closest(temporaryGlobals.SELECTORS.DEBUG_ELEM_RESET_SELECTOR)) {\n        window.localStorage.clear(); \n        window.location.reload();\n      }\n\n      if (event.target.closest(temporaryGlobals.SELECTORS.DEBUG_ELEM_BYPASS_SELECTOR)) {\n        persistentGlobals.pageViews = 100;\n        persistentGlobals.activeTimeOnPage = 100;\n        persistentGlobals.activeTimeOnSite = 100;\n        persistentGlobals.highestScrollPercentageAcrossAllPages = 100;\n\n        let oneDay = 1000 * 60 * 60 * 24;\n        persistentGlobals.modalClosedDate = Date.now() - (oneDay * 2);\n        persistentGlobals.bottomBarClosedDate = Date.now() - (oneDay * 2);\n      }\n\n    });\n  }\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport onExitIntent from \"../helpers/on-exit-intent\";\nimport openModal from \"./modal-actions/open-modal\";\n\n\n// adds exit intent event listener\nexport default function initExitIntent () {\n  onExitIntent(() => {\n    if (temporaryGlobals.isModalOpenable) {\n      openModal();\n    }\n  });\n}","import temporaryGlobals from \"../../temporary-globals/temporary-globals\";\nimport { disableBodyScroll } from 'body-scroll-lock';\nimport {whenTriggerDataChanges} from \"../../trigger-popups/watch-trigger-data\";\n\nexport default function openModal() {\n\n  // store the active element so it can regain focus after modal is closed\n  temporaryGlobals.activeElement = document.activeElement;\n\n  // show the modal\n  temporaryGlobals.MODAL_ELEM.classList.add(\"show\");\n  // add body class\n  document.body.classList.add(temporaryGlobals.BODY_CLASS_MODAL_OPEN);\n  \n  // Focus the first element within the modal. Make sure the element is visible and doesnt have focus disabled (tabindex=-1);\n  temporaryGlobals.MODAL_ELEM.querySelector(temporaryGlobals.FOCUSABLE_SELECTORS).focus();\n\n  // Trap the tab focus by disable tabbing on all elements outside of your modal.\n  // These elements need to be gotten at the time the modal is opened because they may have been added to the page dynamically\n  const focusableElements = document.querySelectorAll(temporaryGlobals.FOCUSABLE_SELECTORS);\n  const focusableElementsInModal = temporaryGlobals.MODAL_ELEM.querySelectorAll(temporaryGlobals.FOCUSABLE_SELECTORS);\n  const focusableElementsInModalArray = Array.from(focusableElementsInModal);\n  focusableElements.forEach(el => {\n    if (!focusableElementsInModalArray.includes(el)) {\n      el.setAttribute('tabindex', '-1');\n    }\n  });\n\n  // Trap the screen reader focus as well with aria roles.\n  temporaryGlobals.MODAL_ELEM.removeAttribute('aria-hidden');\n  const topLevelElements = Array.from(document.body.children);\n  topLevelElements.forEach(el => {\n    if (el !== temporaryGlobals.MODAL_ELEM) {\n      el.setAttribute('aria-hidden', 'true');\n    }\n  });\n\n  disableBodyScroll(temporaryGlobals.MODAL_ELEM);\n\n  temporaryGlobals.isModalOpen = true;\n  // manually recompute `isModalOpenable` because temporary globals don't trigger this automatically\n  whenTriggerDataChanges();\n\n}","import temporaryGlobals from \"../temporary-globals/temporary-globals\";\nimport {onSubmit} from \"../event-handlers/on-submit\";\nimport closeBottomBar from \"./bottom-bar-actions/close-bottom-bar\";\n\nexport default function initBottomBarEventListeners () {\n  temporaryGlobals.BOTTOM_BAR_FORM_ELEM.addEventListener(\"submit\", onSubmit);\n  temporaryGlobals.BOTTOM_BAR_CLOSE_BUTTON_ELEM.addEventListener('click', closeBottomBar);\n}\n","import initEmailForms from \"./init-email-forms\";\n\nfunction contentWebsite (options) {\n  options.websiteType = \"content\";\n  initEmailForms(options);\n}\n\nfunction marketingWebsite (options) {\n  options.websiteType = \"marketing\";\n  initEmailForms(options);\n}\n\nexport default {\n  contentWebsite,\n  marketingWebsite\n}"],"names":["t","r","n","Object","prototype","e","Function","toString","o","hasOwnProperty","a","call","i","c","getPrototypeOf","u","length","Array","l","Symbol","iterator","isArray","slice","constructor","name","from","test","done","value","TypeError","next","bind","f","this","callbacksLookup","emit","on","push","s","y","defaults","JSON","parse","localStorage","getItem","b","assign","Proxy","get","p","set","setItem","stringify","v","g","d","forEach","prop","path","oldValue","Date","getTime","__isDate","ms","persistentGlobals","tigerlily","window","getDaysSinceModalClosed","getDaysSinceClosed","getDaysSinceBottomBarClosed","popupType","closedDate","modalClosedDate","bottomBarClosedDate","days","Math","floor","now","minimumsLookup","pageViews","content","notAggressive","aggressive","marketing","activeTimeOnPage","activeTimeOnSite","highestScrollPercentageAcrossAllPages","whenTriggerDataChanges","modalMeetsRequirements","modalRequirements","modalActualValues","requirements","actual","websiteType","temporaryGlobals","beSlightlyMoreAggressive","getTriggerRequirements","meetsRequirements","keys","every","key","daysSinceModalClosed","isModalOpen","modalMeetsTriggerRequirements","bottomBarMeetsRequirements","bottomBarRequirements","bottomBarActualValues","daysSinceBottomBarClosed","bottomBarMeetsTriggerRequirements","isModalOpenable","BOTTOM_BAR_ELEM","classList","add","document","body","BODY_CLASS_BOTTOM_BAR_OPEN","showDebugNotice","DEBUG_NOTICE_ELEM","innerHTML","charAt","toUpperCase","getDebugNoticeTemplateString","updateDebugNotice","cache","getElem","selector","querySelector","isNumberDefined","val","Number","isNaN","addHtmlToPage","htmlString","insertAdjacentHTML","NotyfArrayEvent","__assign","arguments","apply","NotyfNotification","options","listeners","eventType","cb","concat","triggerEvent","event","_this","target","NotyfEvent","NotyfArray","notifications","elem","updateFn","Add","splice","index","num","Remove","indexOf","onUpdate","fn","DEFAULT_OPTIONS","types","type","className","backgroundColor","icon","tagName","duration","ripple","position","x","dismissible","NotyfView","events","X_POSITION_FLEX_MAP","left","center","right","Y_POSITION_FLEX_MAP","top","bottom","docFrag","createDocumentFragment","notyfContainer","_createHTLMElement","appendChild","container","animationEndEventName","_getAnimationEndEventName","_createA11yContainer","_a","update","notification","addNotification","removeNotification","node","handleEvent","renderedNotification","_popRenderedNotification","addEventListener","removeEventListener","removeChild","_renderNotification","_announce","message","card","_buildNotificationCard","split","idx","getXPosition","getYPosition","adjustContainerAlignment","align","justify","style","setProperty","iconOpts","notificationElem","wrapper","color","background","iconContainer","text","iconColor","dismissWrapper","dismissButton","_b","Dismiss","stopPropagation","Click","createElement","textContent","a11yContainer","setAttribute","border","clip","height","margin","overflow","padding","width","outline","setTimeout","el","transitions","MozTransition","OTransition","WebkitTransition","transition","undefined","notyf","Notyf","opts","dismiss","_removeNotification","view","registerTypes","error","payload","normalizeOptions","open","success","defaultOpts","find","config","assignProps","_pushNotification","dismissAll","props","incomingTypes","map","defaultType","userTypeIdx","userType","showSuccessMessage","msg","closeBottomBar","remove","_toConsumableArray","arr","arr2","hasPassiveEvents","passiveTestOptions","passive","isIosDevice","navigator","platform","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","allowTouchMove","some","lock","preventDefault","rawEvent","touches","closeModal","MODAL_ELEM","BODY_CLASS_MODAL_OPEN","querySelectorAll","FOCUSABLE_SELECTORS","removeAttribute","activeElement","focus","targetElement","console","ontouchstart","ontouchmove","filter","paddingRight","enableBodyScroll","onSubmit","currentTarget","closest","email","SELECTORS","BOTTOM_BAR_FORM_INPUT_ELEM_SELECTOR","spamPreventionKey","formAction","mailchimpConfig","url","replace","data","inputs","encodeURIComponent","script","src","res","showFormSubmissionNotices","result","successMessage","failureMessage","sendEmailToMailChimp","onKeyDown","keyCode","contains","onClickModalBackdrop","MODAL_FORM_ELEM_SELECTOR","initEmailForms","exitIntentCallback","userDefinedGlobals","defaultGlobals","imageSrc","headingText","descriptionText","mainButtonText","closeButtonText","MODAL_ELEM_SELECTOR","MODAL_FORM_INPUT_ELEM_SELECTOR","MODAL_CLOSE_BUTTON_ELEM_SELECTOR","BOTTOM_BAR_ELEM_SELECTOR","BOTTOM_BAR_FORM_ELEM_SELECTOR","BOTTOM_BAR_CLOSE_BUTTON_ELEM_SELECTOR","DEBUG_ELEM","DEBUG_ELEM_RESET_SELECTOR","DEBUG_ELEM_BYPASS_SELECTOR","IS_MOBILE","matchMedia","matches","initTemporaryGlobals","getModalTemplateString","getBottomBarTemplateString","MODAL_FORM_ELEM","MODAL_CLOSE_BUTTON_ELEM","BOTTOM_BAR_FORM_ELEM","BOTTOM_BAR_CLOSE_BUTTON_ELEM","initElemGlobals","throttle","currentScrollPercentage","docScrollHeight","max","scrollHeight","documentElement","offsetHeight","clientHeight","scrollPercentage","pageYOffset","getScrollPercentage","setHighestScrollPercentage","clear","location","reload","oneDay","focusableElements","focusableElementsInModal","focusableElementsInModalArray","includes","children","targetTouches","clientY","scrollTop","isTargetElementTotallyScrolled","handleScroll","_lock","disableBodyScroll","openModal","mouseNearTopOfPage","mouseDidntEnterAnotherElement","relatedTarget","mouseEventIsNotInsideAnInputElement","nodeName","toLowerCase","readyState","contentWebsite","marketingWebsite"],"mappings":"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"}